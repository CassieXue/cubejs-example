!function(e){function t(t){for(var r,s,o=t[0],c=t[1],u=t[2],p=0,d=[];p<o.length;p++)s=o[p],a[s]&&d.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);d.length;)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={1:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="./";var o=window.webpackJsonp=window.webpackJsonp||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([730,0,2]),n()}({1009:function(e,t){},1181:function(e,t,n){var r={"./Binary_Property/ASCII.js":1182,"./Binary_Property/ASCII_Hex_Digit.js":1183,"./Binary_Property/Alphabetic.js":1184,"./Binary_Property/Any.js":1185,"./Binary_Property/Assigned.js":1186,"./Binary_Property/Bidi_Control.js":1187,"./Binary_Property/Bidi_Mirrored.js":1188,"./Binary_Property/Case_Ignorable.js":1189,"./Binary_Property/Cased.js":1190,"./Binary_Property/Changes_When_Casefolded.js":1191,"./Binary_Property/Changes_When_Casemapped.js":1192,"./Binary_Property/Changes_When_Lowercased.js":1193,"./Binary_Property/Changes_When_NFKC_Casefolded.js":1194,"./Binary_Property/Changes_When_Titlecased.js":1195,"./Binary_Property/Changes_When_Uppercased.js":1196,"./Binary_Property/Dash.js":1197,"./Binary_Property/Default_Ignorable_Code_Point.js":1198,"./Binary_Property/Deprecated.js":1199,"./Binary_Property/Diacritic.js":1200,"./Binary_Property/Emoji.js":1201,"./Binary_Property/Emoji_Component.js":1202,"./Binary_Property/Emoji_Modifier.js":1203,"./Binary_Property/Emoji_Modifier_Base.js":1204,"./Binary_Property/Emoji_Presentation.js":1205,"./Binary_Property/Extended_Pictographic.js":1206,"./Binary_Property/Extender.js":1207,"./Binary_Property/Grapheme_Base.js":1208,"./Binary_Property/Grapheme_Extend.js":1209,"./Binary_Property/Hex_Digit.js":1210,"./Binary_Property/IDS_Binary_Operator.js":1211,"./Binary_Property/IDS_Trinary_Operator.js":1212,"./Binary_Property/ID_Continue.js":1213,"./Binary_Property/ID_Start.js":1214,"./Binary_Property/Ideographic.js":1215,"./Binary_Property/Join_Control.js":1216,"./Binary_Property/Logical_Order_Exception.js":1217,"./Binary_Property/Lowercase.js":1218,"./Binary_Property/Math.js":1219,"./Binary_Property/Noncharacter_Code_Point.js":1220,"./Binary_Property/Pattern_Syntax.js":1221,"./Binary_Property/Pattern_White_Space.js":1222,"./Binary_Property/Quotation_Mark.js":1223,"./Binary_Property/Radical.js":1224,"./Binary_Property/Regional_Indicator.js":1225,"./Binary_Property/Sentence_Terminal.js":1226,"./Binary_Property/Soft_Dotted.js":1227,"./Binary_Property/Terminal_Punctuation.js":1228,"./Binary_Property/Unified_Ideograph.js":1229,"./Binary_Property/Uppercase.js":1230,"./Binary_Property/Variation_Selector.js":1231,"./Binary_Property/White_Space.js":1232,"./Binary_Property/XID_Continue.js":1233,"./Binary_Property/XID_Start.js":1234,"./General_Category/Cased_Letter.js":1235,"./General_Category/Close_Punctuation.js":1236,"./General_Category/Connector_Punctuation.js":1237,"./General_Category/Control.js":1238,"./General_Category/Currency_Symbol.js":1239,"./General_Category/Dash_Punctuation.js":1240,"./General_Category/Decimal_Number.js":1241,"./General_Category/Enclosing_Mark.js":1242,"./General_Category/Final_Punctuation.js":1243,"./General_Category/Format.js":1244,"./General_Category/Initial_Punctuation.js":1245,"./General_Category/Letter.js":1246,"./General_Category/Letter_Number.js":1247,"./General_Category/Line_Separator.js":1248,"./General_Category/Lowercase_Letter.js":1249,"./General_Category/Mark.js":1250,"./General_Category/Math_Symbol.js":1251,"./General_Category/Modifier_Letter.js":1252,"./General_Category/Modifier_Symbol.js":1253,"./General_Category/Nonspacing_Mark.js":1254,"./General_Category/Number.js":1255,"./General_Category/Open_Punctuation.js":1256,"./General_Category/Other.js":1257,"./General_Category/Other_Letter.js":1258,"./General_Category/Other_Number.js":1259,"./General_Category/Other_Punctuation.js":1260,"./General_Category/Other_Symbol.js":1261,"./General_Category/Paragraph_Separator.js":1262,"./General_Category/Private_Use.js":1263,"./General_Category/Punctuation.js":1264,"./General_Category/Separator.js":1265,"./General_Category/Space_Separator.js":1266,"./General_Category/Spacing_Mark.js":1267,"./General_Category/Surrogate.js":1268,"./General_Category/Symbol.js":1269,"./General_Category/Titlecase_Letter.js":1270,"./General_Category/Unassigned.js":1271,"./General_Category/Uppercase_Letter.js":1272,"./Script/Adlam.js":1273,"./Script/Ahom.js":1274,"./Script/Anatolian_Hieroglyphs.js":1275,"./Script/Arabic.js":1276,"./Script/Armenian.js":1277,"./Script/Avestan.js":1278,"./Script/Balinese.js":1279,"./Script/Bamum.js":1280,"./Script/Bassa_Vah.js":1281,"./Script/Batak.js":1282,"./Script/Bengali.js":1283,"./Script/Bhaiksuki.js":1284,"./Script/Bopomofo.js":1285,"./Script/Brahmi.js":1286,"./Script/Braille.js":1287,"./Script/Buginese.js":1288,"./Script/Buhid.js":1289,"./Script/Canadian_Aboriginal.js":1290,"./Script/Carian.js":1291,"./Script/Caucasian_Albanian.js":1292,"./Script/Chakma.js":1293,"./Script/Cham.js":1294,"./Script/Cherokee.js":1295,"./Script/Common.js":1296,"./Script/Coptic.js":1297,"./Script/Cuneiform.js":1298,"./Script/Cypriot.js":1299,"./Script/Cyrillic.js":1300,"./Script/Deseret.js":1301,"./Script/Devanagari.js":1302,"./Script/Dogra.js":1303,"./Script/Duployan.js":1304,"./Script/Egyptian_Hieroglyphs.js":1305,"./Script/Elbasan.js":1306,"./Script/Elymaic.js":1307,"./Script/Ethiopic.js":1308,"./Script/Georgian.js":1309,"./Script/Glagolitic.js":1310,"./Script/Gothic.js":1311,"./Script/Grantha.js":1312,"./Script/Greek.js":1313,"./Script/Gujarati.js":1314,"./Script/Gunjala_Gondi.js":1315,"./Script/Gurmukhi.js":1316,"./Script/Han.js":1317,"./Script/Hangul.js":1318,"./Script/Hanifi_Rohingya.js":1319,"./Script/Hanunoo.js":1320,"./Script/Hatran.js":1321,"./Script/Hebrew.js":1322,"./Script/Hiragana.js":1323,"./Script/Imperial_Aramaic.js":1324,"./Script/Inherited.js":1325,"./Script/Inscriptional_Pahlavi.js":1326,"./Script/Inscriptional_Parthian.js":1327,"./Script/Javanese.js":1328,"./Script/Kaithi.js":1329,"./Script/Kannada.js":1330,"./Script/Katakana.js":1331,"./Script/Kayah_Li.js":1332,"./Script/Kharoshthi.js":1333,"./Script/Khmer.js":1334,"./Script/Khojki.js":1335,"./Script/Khudawadi.js":1336,"./Script/Lao.js":1337,"./Script/Latin.js":1338,"./Script/Lepcha.js":1339,"./Script/Limbu.js":1340,"./Script/Linear_A.js":1341,"./Script/Linear_B.js":1342,"./Script/Lisu.js":1343,"./Script/Lycian.js":1344,"./Script/Lydian.js":1345,"./Script/Mahajani.js":1346,"./Script/Makasar.js":1347,"./Script/Malayalam.js":1348,"./Script/Mandaic.js":1349,"./Script/Manichaean.js":1350,"./Script/Marchen.js":1351,"./Script/Masaram_Gondi.js":1352,"./Script/Medefaidrin.js":1353,"./Script/Meetei_Mayek.js":1354,"./Script/Mende_Kikakui.js":1355,"./Script/Meroitic_Cursive.js":1356,"./Script/Meroitic_Hieroglyphs.js":1357,"./Script/Miao.js":1358,"./Script/Modi.js":1359,"./Script/Mongolian.js":1360,"./Script/Mro.js":1361,"./Script/Multani.js":1362,"./Script/Myanmar.js":1363,"./Script/Nabataean.js":1364,"./Script/Nandinagari.js":1365,"./Script/New_Tai_Lue.js":1366,"./Script/Newa.js":1367,"./Script/Nko.js":1368,"./Script/Nushu.js":1369,"./Script/Nyiakeng_Puachue_Hmong.js":1370,"./Script/Ogham.js":1371,"./Script/Ol_Chiki.js":1372,"./Script/Old_Hungarian.js":1373,"./Script/Old_Italic.js":1374,"./Script/Old_North_Arabian.js":1375,"./Script/Old_Permic.js":1376,"./Script/Old_Persian.js":1377,"./Script/Old_Sogdian.js":1378,"./Script/Old_South_Arabian.js":1379,"./Script/Old_Turkic.js":1380,"./Script/Oriya.js":1381,"./Script/Osage.js":1382,"./Script/Osmanya.js":1383,"./Script/Pahawh_Hmong.js":1384,"./Script/Palmyrene.js":1385,"./Script/Pau_Cin_Hau.js":1386,"./Script/Phags_Pa.js":1387,"./Script/Phoenician.js":1388,"./Script/Psalter_Pahlavi.js":1389,"./Script/Rejang.js":1390,"./Script/Runic.js":1391,"./Script/Samaritan.js":1392,"./Script/Saurashtra.js":1393,"./Script/Sharada.js":1394,"./Script/Shavian.js":1395,"./Script/Siddham.js":1396,"./Script/SignWriting.js":1397,"./Script/Sinhala.js":1398,"./Script/Sogdian.js":1399,"./Script/Sora_Sompeng.js":1400,"./Script/Soyombo.js":1401,"./Script/Sundanese.js":1402,"./Script/Syloti_Nagri.js":1403,"./Script/Syriac.js":1404,"./Script/Tagalog.js":1405,"./Script/Tagbanwa.js":1406,"./Script/Tai_Le.js":1407,"./Script/Tai_Tham.js":1408,"./Script/Tai_Viet.js":1409,"./Script/Takri.js":1410,"./Script/Tamil.js":1411,"./Script/Tangut.js":1412,"./Script/Telugu.js":1413,"./Script/Thaana.js":1414,"./Script/Thai.js":1415,"./Script/Tibetan.js":1416,"./Script/Tifinagh.js":1417,"./Script/Tirhuta.js":1418,"./Script/Ugaritic.js":1419,"./Script/Vai.js":1420,"./Script/Wancho.js":1421,"./Script/Warang_Citi.js":1422,"./Script/Yi.js":1423,"./Script/Zanabazar_Square.js":1424,"./Script_Extensions/Adlam.js":1425,"./Script_Extensions/Ahom.js":1426,"./Script_Extensions/Anatolian_Hieroglyphs.js":1427,"./Script_Extensions/Arabic.js":1428,"./Script_Extensions/Armenian.js":1429,"./Script_Extensions/Avestan.js":1430,"./Script_Extensions/Balinese.js":1431,"./Script_Extensions/Bamum.js":1432,"./Script_Extensions/Bassa_Vah.js":1433,"./Script_Extensions/Batak.js":1434,"./Script_Extensions/Bengali.js":1435,"./Script_Extensions/Bhaiksuki.js":1436,"./Script_Extensions/Bopomofo.js":1437,"./Script_Extensions/Brahmi.js":1438,"./Script_Extensions/Braille.js":1439,"./Script_Extensions/Buginese.js":1440,"./Script_Extensions/Buhid.js":1441,"./Script_Extensions/Canadian_Aboriginal.js":1442,"./Script_Extensions/Carian.js":1443,"./Script_Extensions/Caucasian_Albanian.js":1444,"./Script_Extensions/Chakma.js":1445,"./Script_Extensions/Cham.js":1446,"./Script_Extensions/Cherokee.js":1447,"./Script_Extensions/Common.js":1448,"./Script_Extensions/Coptic.js":1449,"./Script_Extensions/Cuneiform.js":1450,"./Script_Extensions/Cypriot.js":1451,"./Script_Extensions/Cyrillic.js":1452,"./Script_Extensions/Deseret.js":1453,"./Script_Extensions/Devanagari.js":1454,"./Script_Extensions/Dogra.js":1455,"./Script_Extensions/Duployan.js":1456,"./Script_Extensions/Egyptian_Hieroglyphs.js":1457,"./Script_Extensions/Elbasan.js":1458,"./Script_Extensions/Elymaic.js":1459,"./Script_Extensions/Ethiopic.js":1460,"./Script_Extensions/Georgian.js":1461,"./Script_Extensions/Glagolitic.js":1462,"./Script_Extensions/Gothic.js":1463,"./Script_Extensions/Grantha.js":1464,"./Script_Extensions/Greek.js":1465,"./Script_Extensions/Gujarati.js":1466,"./Script_Extensions/Gunjala_Gondi.js":1467,"./Script_Extensions/Gurmukhi.js":1468,"./Script_Extensions/Han.js":1469,"./Script_Extensions/Hangul.js":1470,"./Script_Extensions/Hanifi_Rohingya.js":1471,"./Script_Extensions/Hanunoo.js":1472,"./Script_Extensions/Hatran.js":1473,"./Script_Extensions/Hebrew.js":1474,"./Script_Extensions/Hiragana.js":1475,"./Script_Extensions/Imperial_Aramaic.js":1476,"./Script_Extensions/Inherited.js":1477,"./Script_Extensions/Inscriptional_Pahlavi.js":1478,"./Script_Extensions/Inscriptional_Parthian.js":1479,"./Script_Extensions/Javanese.js":1480,"./Script_Extensions/Kaithi.js":1481,"./Script_Extensions/Kannada.js":1482,"./Script_Extensions/Katakana.js":1483,"./Script_Extensions/Kayah_Li.js":1484,"./Script_Extensions/Kharoshthi.js":1485,"./Script_Extensions/Khmer.js":1486,"./Script_Extensions/Khojki.js":1487,"./Script_Extensions/Khudawadi.js":1488,"./Script_Extensions/Lao.js":1489,"./Script_Extensions/Latin.js":1490,"./Script_Extensions/Lepcha.js":1491,"./Script_Extensions/Limbu.js":1492,"./Script_Extensions/Linear_A.js":1493,"./Script_Extensions/Linear_B.js":1494,"./Script_Extensions/Lisu.js":1495,"./Script_Extensions/Lycian.js":1496,"./Script_Extensions/Lydian.js":1497,"./Script_Extensions/Mahajani.js":1498,"./Script_Extensions/Makasar.js":1499,"./Script_Extensions/Malayalam.js":1500,"./Script_Extensions/Mandaic.js":1501,"./Script_Extensions/Manichaean.js":1502,"./Script_Extensions/Marchen.js":1503,"./Script_Extensions/Masaram_Gondi.js":1504,"./Script_Extensions/Medefaidrin.js":1505,"./Script_Extensions/Meetei_Mayek.js":1506,"./Script_Extensions/Mende_Kikakui.js":1507,"./Script_Extensions/Meroitic_Cursive.js":1508,"./Script_Extensions/Meroitic_Hieroglyphs.js":1509,"./Script_Extensions/Miao.js":1510,"./Script_Extensions/Modi.js":1511,"./Script_Extensions/Mongolian.js":1512,"./Script_Extensions/Mro.js":1513,"./Script_Extensions/Multani.js":1514,"./Script_Extensions/Myanmar.js":1515,"./Script_Extensions/Nabataean.js":1516,"./Script_Extensions/Nandinagari.js":1517,"./Script_Extensions/New_Tai_Lue.js":1518,"./Script_Extensions/Newa.js":1519,"./Script_Extensions/Nko.js":1520,"./Script_Extensions/Nushu.js":1521,"./Script_Extensions/Nyiakeng_Puachue_Hmong.js":1522,"./Script_Extensions/Ogham.js":1523,"./Script_Extensions/Ol_Chiki.js":1524,"./Script_Extensions/Old_Hungarian.js":1525,"./Script_Extensions/Old_Italic.js":1526,"./Script_Extensions/Old_North_Arabian.js":1527,"./Script_Extensions/Old_Permic.js":1528,"./Script_Extensions/Old_Persian.js":1529,"./Script_Extensions/Old_Sogdian.js":1530,"./Script_Extensions/Old_South_Arabian.js":1531,"./Script_Extensions/Old_Turkic.js":1532,"./Script_Extensions/Oriya.js":1533,"./Script_Extensions/Osage.js":1534,"./Script_Extensions/Osmanya.js":1535,"./Script_Extensions/Pahawh_Hmong.js":1536,"./Script_Extensions/Palmyrene.js":1537,"./Script_Extensions/Pau_Cin_Hau.js":1538,"./Script_Extensions/Phags_Pa.js":1539,"./Script_Extensions/Phoenician.js":1540,"./Script_Extensions/Psalter_Pahlavi.js":1541,"./Script_Extensions/Rejang.js":1542,"./Script_Extensions/Runic.js":1543,"./Script_Extensions/Samaritan.js":1544,"./Script_Extensions/Saurashtra.js":1545,"./Script_Extensions/Sharada.js":1546,"./Script_Extensions/Shavian.js":1547,"./Script_Extensions/Siddham.js":1548,"./Script_Extensions/SignWriting.js":1549,"./Script_Extensions/Sinhala.js":1550,"./Script_Extensions/Sogdian.js":1551,"./Script_Extensions/Sora_Sompeng.js":1552,"./Script_Extensions/Soyombo.js":1553,"./Script_Extensions/Sundanese.js":1554,"./Script_Extensions/Syloti_Nagri.js":1555,"./Script_Extensions/Syriac.js":1556,"./Script_Extensions/Tagalog.js":1557,"./Script_Extensions/Tagbanwa.js":1558,"./Script_Extensions/Tai_Le.js":1559,"./Script_Extensions/Tai_Tham.js":1560,"./Script_Extensions/Tai_Viet.js":1561,"./Script_Extensions/Takri.js":1562,"./Script_Extensions/Tamil.js":1563,"./Script_Extensions/Tangut.js":1564,"./Script_Extensions/Telugu.js":1565,"./Script_Extensions/Thaana.js":1566,"./Script_Extensions/Thai.js":1567,"./Script_Extensions/Tibetan.js":1568,"./Script_Extensions/Tifinagh.js":1569,"./Script_Extensions/Tirhuta.js":1570,"./Script_Extensions/Ugaritic.js":1571,"./Script_Extensions/Vai.js":1572,"./Script_Extensions/Wancho.js":1573,"./Script_Extensions/Warang_Citi.js":1574,"./Script_Extensions/Yi.js":1575,"./Script_Extensions/Zanabazar_Square.js":1576,"./index.js":1577,"./unicode-version.js":1578};function a(e){var t=i(e);return n(t)}function i(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=1181},146:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),n(816);var a=r(n(823));n(827),n(842),n(491),n(852);var i=r(n(854)),s=r(n(855)),o=r(n(858)),c=r(n(859)),u=r(n(860)),l=n(862),p=r(l),d=n(865),m=n(1937),h=r(n(868)),y=r(n(869)),f=r(n(870));n(872);var b=r(n(495));n(873);var j=r(n(874));n(496);var g=r(n(876)),S=function(e){return e.measures&&e.measures.length||e.dimensions&&e.dimensions.length||e.timeDimensions&&e.timeDimensions.length},v=l.createContext(null),x=function(e){function t(e){var n;return i(this,t),(n=s(this,o(t).call(this,e))).state={},n.mutexObj={},n}return u(t,e),c(t,null,[{key:"isQueryPresent",value:function(e){return S(e)}}]),c(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.query,n=e.queries;t&&this.load(t),n&&this.loadQueries(n)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,r=n.query,a=n.queries,i=n.render,s=n.cubejsApi,o=n.loadSql,c=n.updateOnlyOnStateChange;return!c||(!m.equals(e.query,r)||!m.equals(e.queries,a)||(null==e.render||null==i)&&e.render!==i||e.cubejsApi!==s||e.loadSql!==o||!m.equals(t,this.state)||e.updateOnlyOnStateChange!==c)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.query,r=t.queries;m.equals(e.query,n)||this.load(n),m.equals(e.queries,r)||this.loadQueries(r)}},{key:"cubejsApi",value:function(){return this.props.cubejsApi||this.context&&this.context.cubejsApi}},{key:"load",value:function(e){var n=this;this.setState({isLoading:!0,resultSet:null,error:null,sqlQuery:null});var r=this.props.loadSql,i=this.cubejsApi();e&&t.isQueryPresent(e)&&("only"===r?i.sql(e,{mutexObj:this.mutexObj,mutexKey:"sql"}).then((function(e){return n.setState({sqlQuery:e,error:null,isLoading:!1})})).catch((function(e){return n.setState({resultSet:null,error:e,isLoading:!1})})):r?Promise.all([i.sql(e,{mutexObj:this.mutexObj,mutexKey:"sql"}),i.load(e,{mutexObj:this.mutexObj,mutexKey:"query"})]).then((function(e){var t=a(e,2),r=t[0],i=t[1];return n.setState({sqlQuery:r,resultSet:i,error:null,isLoading:!1})})).catch((function(e){return n.setState({resultSet:null,error:e,isLoading:!1})})):i.load(e,{mutexObj:this.mutexObj,mutexKey:"query"}).then((function(e){return n.setState({resultSet:e,error:null,isLoading:!1})})).catch((function(e){return n.setState({resultSet:null,error:e,isLoading:!1})})))}},{key:"loadQueries",value:function(e){var t=this,n=this.cubejsApi();this.setState({isLoading:!0,resultSet:null,error:null}),Promise.all(m.toPairs(e).map((function(e){var r=a(e,2),i=r[0],s=r[1];return n.load(s,{mutexObj:t.mutexObj,mutexKey:i}).then((function(e){return[i,e]}))}))).then((function(e){return t.setState({resultSet:m.fromPairs(e),error:null,isLoading:!1})})).catch((function(e){return t.setState({resultSet:null,error:e,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.queries,r=e.resultSet,a=e.isLoading,i=e.sqlQuery,s=this.props.render;return s?s({error:t,resultSet:n?r||{}:r,loadingState:{isLoading:a},sqlQuery:i}):null}}]),t}(p.Component);x.contextType=v,x.propTypes={render:d.func,cubejsApi:d.object,query:d.object,queries:d.object,loadSql:d.any,updateOnlyOnStateChange:d.bool},x.defaultProps={cubejsApi:null,query:null,render:null,queries:null,loadSql:null,updateOnlyOnStateChange:!1};var k=function(e){var t=e.query,n=f(e,["query"]);return p.createElement(x,h({queries:{totals:y({},t,{dimensions:[],timeDimensions:t.timeDimensions?t.timeDimensions.map((function(e){return y({},e,{granularity:null})})):void 0}),main:t}},n))};k.propTypes={render:d.func,cubejsApi:d.object.isRequired,query:d.object,queries:d.object,loadSql:d.any},k.defaultProps={query:null,render:null,queries:null,loadSql:null};var E=function(e){function t(e){var n;return i(this,t),(n=s(this,o(t).call(this,e))).state=y({query:e.query,chartType:"line"},e.vizState),n}var n;return u(t,e),c(t,[{key:"componentDidMount",value:(n=g(j.mark((function e(){var t;return j.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cubejsApi().meta();case 2:t=e.sent,this.setState({meta:t});case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.query,r=t.vizState;m.equals(e.query,n)||this.setState({query:n}),m.equals(e.vizState,r)||this.setState(r)}},{key:"cubejsApi",value:function(){var e=this.props.cubejsApi;return e||this.context&&this.context.cubejsApi}},{key:"isQueryPresent",value:function(){var e=this.state.query;return x.isQueryPresent(e)}},{key:"prepareRenderProps",value:function(e){var t=this,n=function(e){return e.name},r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return{add:function(n){var a=t.state.query;t.updateQuery(b({},e,(a[e]||[]).concat(r(n))))},remove:function(n){var r=(t.state.query[e]||[]).concat([]);return r.splice(n.index,1),t.updateQuery(b({},e,r))},update:function(n,a){var i=(t.state.query[e]||[]).concat([]);return i.splice(n.index,1,r(a)),t.updateQuery(b({},e,i))}}},a=[{name:void 0,title:"w/o grouping"},{name:"hour",title:"Hour"},{name:"day",title:"Day"},{name:"week",title:"Week"},{name:"month",title:"Month"},{name:"year",title:"Year"}],i=this.state,s=i.meta,o=i.query,c=i.chartType;return y({meta:s,query:o,validatedQuery:this.validatedQuery(),isQueryPresent:this.isQueryPresent(),chartType:c,measures:(s&&o.measures||[]).map((function(e,t){return y({index:t},s.resolveMember(e,"measures"))})),dimensions:(s&&o.dimensions||[]).map((function(e,t){return y({index:t},s.resolveMember(e,"dimensions"))})),segments:(s&&o.segments||[]).map((function(e,t){return y({index:t},s.resolveMember(e,"segments"))})),timeDimensions:(s&&o.timeDimensions||[]).map((function(e,t){return y({},e,{dimension:y({},s.resolveMember(e.dimension,"dimensions"),{granularities:a}),index:t})})),filters:(s&&o.filters||[]).map((function(e,t){return y({},e,{dimension:s.resolveMember(e.dimension,["dimensions","measures"]),operators:s.filterOperatorsForMember(e.dimension,["dimensions","measures"]),index:t})})),availableMeasures:s&&s.membersForQuery(o,"measures")||[],availableDimensions:s&&s.membersForQuery(o,"dimensions")||[],availableTimeDimensions:(s&&s.membersForQuery(o,"dimensions")||[]).filter((function(e){return"time"===e.type})),availableSegments:s&&s.membersForQuery(o,"segments")||[],updateMeasures:r("measures"),updateDimensions:r("dimensions"),updateSegments:r("segments"),updateTimeDimensions:r("timeDimensions",(function(e){return{dimension:e.dimension.name,granularity:e.granularity,dateRange:e.dateRange}})),updateFilters:r("filters",(function(e){return{dimension:e.dimension.name,operator:e.operator,values:e.values}})),updateChartType:function(e){return t.updateVizState({chartType:e})}},e)}},{key:"updateQuery",value:function(e){var t=this.state.query;this.updateVizState({query:y({},t,e)})}},{key:"updateVizState",value:function(e){var t=this.props,n=t.setQuery,r=t.setVizState,a=this.applyStateChangeHeuristics(e);if(this.setState(a),a=y({},this.state,a),n&&n(a.query),r){var i=a;i.meta;r(f(i,["meta"]))}}},{key:"validatedQuery",value:function(){var e=this.state.query;return y({},e,{filters:(e.filters||[]).filter((function(e){return e.operator}))})}},{key:"defaultHeuristics",value:function(e){var t=this.state,n=t.query,r=t.sessionGranularity||"day";if(e.query){var i=n,s=e.query,o=this.state.meta;if(1===(i.timeDimensions||[]).length&&1===(s.timeDimensions||[]).length&&s.timeDimensions[0].granularity&&i.timeDimensions[0].granularity!==s.timeDimensions[0].granularity&&(e=y({},e,{sessionGranularity:s.timeDimensions[0].granularity})),0===(i.measures||[]).length&&(s.measures||[]).length>0||1===(i.measures||[]).length&&1===(s.measures||[]).length&&i.measures[0]!==s.measures[0]){var c=o.defaultTimeDimensionNameFor(s.measures[0]);return s=y({},s,{timeDimensions:c?[{dimension:c,granularity:r}]:[]}),y({},e,{query:s,chartType:c?"line":"number"})}return 0===(i.dimensions||[]).length&&(s.dimensions||[]).length>0?(s=y({},s,{timeDimensions:(s.timeDimensions||[]).map((function(e){return y({},e,{granularity:void 0})}))}),y({},e,{query:s,chartType:"table"})):(i.dimensions||[]).length>0&&0===(s.dimensions||[]).length?(s=y({},s,{timeDimensions:(s.timeDimensions||[]).map((function(e){return y({},e,{granularity:e.granularity||r})}))}),y({},e,{query:s,chartType:(s.timeDimensions||[]).length?"line":"number"})):((i.dimensions||[]).length>0||(i.measures||[]).length>0)&&0===(s.dimensions||[]).length&&0===(s.measures||[]).length?(s=y({},s,{timeDimensions:[],filters:[]}),y({},e,{query:s,sessionGranularity:null})):e}if(e.chartType){var u=e.chartType;if(("line"===u||"area"===u)&&1===(n.timeDimensions||[]).length&&!n.timeDimensions[0].granularity){var l=a(n.timeDimensions,1)[0];return y({},e,{query:y({},n,{timeDimensions:[y({},l,{granularity:r})]})})}if(("pie"===u||"table"===u||"number"===u)&&1===(n.timeDimensions||[]).length&&n.timeDimensions[0].granularity){var p=a(n.timeDimensions,1)[0];return y({},e,{query:y({},n,{timeDimensions:[y({},p,{granularity:void 0})]})})}}return e}},{key:"applyStateChangeHeuristics",value:function(e){var t=this.props,n=t.stateChangeHeuristics;return t.disableHeuristics?e:n&&n(this.state,e)||this.defaultHeuristics(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.cubejsApi,r=t.render;return t.wrapWithQueryRenderer?p.createElement(x,{query:this.validatedQuery(),cubejsApi:n,render:function(t){return r?r(e.prepareRenderProps(t)):null}}):r?r(this.prepareRenderProps()):null}}]),t}(p.Component);E.contextType=v,E.propTypes={render:d.func,stateChangeHeuristics:d.func,setQuery:d.func,setVizState:d.func,cubejsApi:d.object,disableHeuristics:d.bool,wrapWithQueryRenderer:d.bool,query:d.object,vizState:d.object},E.defaultProps={cubejsApi:null,query:{},setQuery:null,setVizState:null,stateChangeHeuristics:null,disableHeuristics:!1,render:null,wrapWithQueryRenderer:!0,vizState:{}};var _=function(e){var t=e.cubejsApi,n=e.children;return p.createElement(v.Provider,{value:{cubejsApi:t}},n)};_.propTypes={cubejsApi:d.object.isRequired,children:d.any.isRequired};t.QueryRenderer=x,t.QueryRendererWithTotals=k,t.QueryBuilder=E,t.isQueryPresent=S,t.CubeProvider=_,t.useCubeQuery=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l.useState({}),r=a(n,1),i=r[0],s=l.useState(null),o=a(s,2),c=o[0],u=o[1],p=l.useState(!1),d=a(p,2),h=d[0],y=d[1],f=l.useState(null),b=a(f,2),x=b[0],k=b[1],E=l.useState(null),_=a(E,2),C=_[0],O=_[1],w=l.useContext(v),P=null;return l.useEffect((function(){function n(){return(n=g(j.mark((function n(){var r;return j.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e||!S(e)){n.next=25;break}if(m.equals(c,e)||(k(null),O(null),u(e)),y(!0),n.prev=3,!P){n.next=8;break}return n.next=7,P.unsubscribe();case 7:P=null;case 8:if(r=t.cubejsApi||w&&w.cubejsApi,!t.subscribe){n.next=13;break}P=r.subscribe(e,{mutexObj:i,mutexKey:"query"},(function(e,t){y(!1),e?O(e):k(t)})),n.next=19;break;case 13:return n.t0=k,n.next=16,r.load(e,{mutexObj:i,mutexKey:"query"});case 16:n.t1=n.sent,(0,n.t0)(n.t1),y(!1);case 19:n.next=25;break;case 21:n.prev=21,n.t2=n.catch(3),O(n.t2),y(!1);case 25:case"end":return n.stop()}}),n,this,[[3,21]])})))).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){P&&(P.unsubscribe(),P=null)}}),[JSON.stringify(e),t.cubejsApi,w]),{isLoading:h,resultSet:x,error:C}}},1644:function(e,t,n){},1935:function(e,t,n){},1936:function(e,t,n){},1939:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"sourceCodeTemplate",(function(){return xe})),n.d(r,"imports",(function(){return ke}));var a={};n.r(a),n.d(a,"sourceCodeTemplate",(function(){return Ce})),n.d(a,"imports",(function(){return Oe}));var i={};n.r(i),n.d(i,"sourceCodeTemplate",(function(){return Te})),n.d(i,"imports",(function(){return qe}));var s={};n.r(s),n.d(s,"sourceCodeTemplate",(function(){return Me})),n.d(s,"imports",(function(){return De}));var o=n(1),c=n.n(o),u=n(11),l=n.n(u),p=n(113),d=n(76),m=n(20),h=n.n(m),y=n(30),f=n(60),b=n(61),j=n(68),g=n(67),S=n(69),v=n(95),x=n(143),k=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(j.a)(this,Object(g.a)(t).call(this,e))).state={},n}var n,r;return Object(S.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:(r=Object(y.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadFiles();case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"loadFiles",value:(n=Object(y.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)("/playground/files");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({files:n.files});case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){return this.state.files?c.a.createElement(p.a,{to:!this.state.files.length||1===this.state.files.length&&"Orders.js"===this.state.files[0].fileName?"/schema":"/build"}):c.a.createElement("div",{style:{textAlign:"center",padding:24}},c.a.createElement(x.a,null))}}]),t}(o.Component),E=n(210),_=n.n(E),C=n(41),O=n(149),w=function e(t,n){var r=n||{},a=r.retries,i=Object(O.a)(r,["retries"]);return a=a||0,Object(v.a)(t,i).then(function(){var e=Object(y.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(500!==t.status){e.next=6;break}return e.next=3,t.text();case 3:n=e.sent;try{r=JSON.parse(n),n=r.error}catch(e){}throw n;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(r){if("Network request failed"===r.message&&a>0)return e(t,{options:n,retries:a-1});throw r}))},P=function(e,t,n){return w(e,Object(C.a)({},t,{retries:n}))},T=function(){function e(){Object(f.a)(this,e)}var t,n,r,a,i;return Object(b.a)(e,[{key:"load",value:(i=Object(y.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadError=null,e.next=3,P("/playground/dashboard-app-create-status".concat(t?"?instant=true":""),void 0,10);case 3:return n=e.sent,e.next=6,n.json();case 6:(r=e.sent).error?this.loadError=r.error:(this.dashboardCreated="created"===r.status,this.installedTemplates=r.installedTemplates);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"applyTemplatePackages",value:(a=Object(y.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.playgroundContext){e.next=4;break}return e.next=3,this.loadContext();case 3:this.playgroundContext=e.sent;case 4:return e.abrupt("return",P("/playground/apply-template-packages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templatePackages:t,templateConfig:n||{credentials:this.playgroundContext}})}));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"loadContext",value:(r=Object(y.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/playground/context");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",{cubejsToken:n.cubejsToken,apiUrl:n.apiUrl||window.location.href.split("#")[0].replace(/\/$/,"")});case 7:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"canAddChart",value:(n=Object(y.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(!this.loadError){e.next=4;break}return e.abrupt("return",this.loadError);case 4:return e.abrupt("return",!!Object.keys(this.installedTemplates).find((function(e){return e.match(/-static$/)})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"addChart",value:(t=Object(y.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(!this.loadError){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.applyTemplatePackages(["create-react-app",Object.keys(this.installedTemplates).find((function(e){return e.match(/-static$/)})),"static-chart"],{"static-chart":{chartCode:t}});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"templatePackages",get:function(){return[{name:"react-antd-dynamic",description:"React Antd Dynamic"},{name:"react-antd-static",description:"React Antd Static"},{name:"react-material-static",description:"React Material UI Static"}]}}]),e}(),q=n(211),A=n(151),M=n(88),D=n(685),L=n(647),R=n(146),B=n(724),I=n(437),N=n.n(I),F=n(686),Q=n.n(F),G=n(687),K=n.n(G),V=n(53),U=n(646),z=n(148),H=n(54),Y=n(684),W=n(207),J=n(10),$=n(621),X=n(688),Z=n(1941),ee=n(254),te=n.n(ee),ne=n(438),re=n.n(ne),ae=(n(1644),function(e){function t(){return Object(f.a)(this,t),Object(j.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){re.a.highlightAll()}},{key:"componentDidUpdate",value:function(){re.a.highlightAll()}},{key:"render",value:function(){return c.a.createElement("pre",{style:this.props.style},c.a.createElement("code",{className:"language-javascript"},this.props.code))}}]),t}(c.a.Component)),ie=n(253),se=n(680),oe=function(e){var t=e.query,n=e.cubejsApi;return c.a.createElement(R.QueryRenderer,{loadSql:!0,query:Object(C.a)({},t,{renewQuery:!0}),cubejsApi:n,render:function(e){var t=e.sqlQuery,n=e.resultSet;return c.a.createElement(ie.a,{defaultActiveKey:"refreshKeys",tabBarExtraContent:c.a.createElement("span",null,"Last Refresh Time: ",c.a.createElement("b",null,n&&n.loadResponse.lastRefreshTime))},c.a.createElement(ie.a.TabPane,{tab:"Refresh Keys",key:"refreshKeys"},c.a.createElement(se.a,{loading:!t,pagination:!1,scroll:{x:!0},columns:[{title:"Refresh Key SQL",key:"refreshKey",render:function(e,t){return c.a.createElement(ae,{code:te.a.format(t[0])})}},{title:"Value",key:"value",render:function(e,r){return c.a.createElement(ae,{code:n&&n.loadResponse.refreshKeyValues&&JSON.stringify(n.loadResponse.refreshKeyValues[t.sqlQuery.sql.cacheKeyQueries.queries.indexOf(r)],null,2)})}}],dataSource:t&&t.sqlQuery.sql&&t.sqlQuery.sql.cacheKeyQueries.queries})),c.a.createElement(ie.a.TabPane,{tab:"Pre-aggregations",key:"preAggregations"},c.a.createElement(se.a,{loading:!t,pagination:!1,scroll:{x:!0},columns:[{title:"Table Name",key:"tableName",dataIndex:"tableName",render:function(e){return c.a.createElement("b",null,e)}},{title:"Refresh Key SQL",key:"refreshKey",dataIndex:"invalidateKeyQueries",render:function(e){return e.map((function(e){return c.a.createElement(ae,{key:e[0],code:te.a.format(e[0])})}))}},{title:"Refresh Key Value",key:"value",render:function(e,t){return n&&n.loadResponse.usedPreAggregations&&n.loadResponse.usedPreAggregations[t.tableName].refreshKeyValues.map((function(e){return c.a.createElement(ae,{key:JSON.stringify(e),code:JSON.stringify(e,null,2)})}))}}],dataSource:t&&t.sqlQuery.sql&&t.sqlQuery.sql.preAggregations})),c.a.createElement(ie.a.TabPane,{tab:"Rollup Match Results",key:"rollupMatchResults"},c.a.createElement(se.a,{loading:!t,pagination:!1,scroll:{x:!0},columns:[{title:"Rollup Table Name",key:"tableName",dataIndex:"tableName",render:function(e){return c.a.createElement("b",null,e)}},{title:"Rollup Definition",key:"rollup",dataIndex:"references",render:function(e){return c.a.createElement(ae,{code:JSON.stringify(e,null,2)})}},{title:"Can Be Used",key:"canUsePreAggregation",dataIndex:"canUsePreAggregation",render:function(e){return e?c.a.createElement(J.a,{type:"check",style:{color:"#52c41a",fontSize:"2em"}}):c.a.createElement(J.a,{type:"close",style:{color:"#c2371b",fontSize:"2em"}})}}],dataSource:t&&t.sqlQuery.sql&&t.sqlQuery.sql.rollupMatchResults})))}})},ce=n(321),ue=n.n(ce),le=n(440),pe=n.n(le),de=null,me=[],he=function(){var e=Object(y.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ue()("playground_anonymous")||ue()("playground_anonymous",pe()()),me.push(Object(C.a)({},t,{id:pe()(),clientAnonymousId:ue()("playground_anonymous"),clientTimestamp:(new Date).toJSON()})),n=function(){var e=Object(y.a)(h.a.mark((function e(t,r){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||(t=me,me=[]),t.length){e.next=3;break}return e.abrupt("return",null);case 3:return null==r&&(r=10),e.prev=4,a=(new Date).toJSON(),e.next=8,Object(v.a)("https://track.cube.dev/track",{method:"post",body:JSON.stringify(t.map((function(e){return Object(C.a)({},e,{sentAt:a})}))),headers:{"Content-Type":"application/json"}});case 8:if(!(200!==e.sent.status&&r>0)){e.next=11;break}return e.abrupt("return",n(t,r-1));case 11:e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(4),!(r>0)){e.next=17;break}return e.abrupt("return",n(t,r-1));case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,n){return e.apply(this,arguments)}}(),r=(de||Promise.resolve()).then((function(){return n()})).then((function(){r===de&&(de=null)})),de=r,e.abrupt("return",de);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(e,t){he(Object(C.a)({event:e},t))},fe=function(e,t){ye("Playground Action",Object(C.a)({name:e},t))},be=[{id:"vanilla",title:"Vanilla JavaScript",docsLink:"https://cube.dev/docs/@cubejs-client-core"},{id:"react",title:"React"},{id:"angular",title:"Angular",docsLink:"https://cube.dev/docs/@cubejs-client-ngx"},{id:"vue",title:"Vue.js",docsLink:"https://cube.dev/docs/@cubejs-client-vue"}],je=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(j.a)(this,Object(g.a)(t).call(this,e))).state={showCode:!1,framework:"react"},n}var n;return Object(S.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:(n=Object(y.a)(h.a.mark((function e(){var t,n,r,a,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.codeSandboxSource,r=t.dependencies,e.next=3,Object(v.a)("https://codesandbox.io/api/v1/sandboxes/define?json=1",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(this.codeSandboxDefinition(n,r))});case 3:return a=e.sent,e.next=6,a.json();case 6:i=e.sent,this.setState({sandboxId:i.sandbox_id});case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"codeSandboxDefinition",value:function(e,t){return{files:Object(C.a)({},"string"==typeof e?{"index.js":{content:e}}:e,{"package.json":{content:{dependencies:Object(C.a)({"react-dom":"latest"},Object(Z.a)((function(){return"latest"}),t))}}}),template:"create-react-app"}}},{key:"render",value:function(){var e=this,t=this.state,n=t.redirectToDashboard,r=t.showCode,a=t.sandboxId,i=t.addingToDashboard,s=t.framework,o=this.props,u=o.resultSet,l=o.error,d=o.codeExample,m=o.render,f=o.codeSandboxSource,b=o.dependencies,j=o.dashboardSource,g=o.hideActions,S=o.query,v=o.cubejsApi,x=o.chartLibrary,k=o.setChartLibrary,E=o.chartLibraries,_=o.history;if(n)return c.a.createElement(p.a,{to:"/dashboard"});var C,O=Object(X.getParameters)(this.codeSandboxDefinition(f,b)),w=c.a.createElement(z.a,{onClick:function(e){fe("Set Chart Library",{chartLibrary:e.key}),k(e.key)}},E.map((function(e){return c.a.createElement(z.a.Item,{key:e.value},e.title)}))),P=c.a.createElement(z.a,{onClick:function(t){fe("Set Framework",{framework:t.key}),e.setState({framework:t.key})}},be.map((function(e){return c.a.createElement(z.a.Item,{key:e.id},e.title)}))),T=E.find((function(e){return e.value===x})),q=be.find((function(e){return e.id===s})),A=c.a.createElement("form",{action:"https://codesandbox.io/api/v1/sandboxes/define",method:"POST",target:"_blank"},c.a.createElement("input",{type:"hidden",name:"parameters",value:O}),c.a.createElement(H.a.Group,null,j&&c.a.createElement(H.a,{onClick:Object(y.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({addingToDashboard:!0}),t.next=3,j.canAddChart();case 3:if("boolean"!=typeof(n=t.sent)||!n){t.next=11;break}return fe("Add to Dashboard"),t.next=8,j.addChart(d);case 8:e.setState({redirectToDashboard:!0,addingToDashboard:!1}),t.next=12;break;case 11:n?(e.setState({addingToDashboard:!1}),Y.a.error({title:"There is an error loading your dashboard app",content:n,okText:"Fix",okCancel:!0,onOk:function(){_.push("/dashboard")}})):(e.setState({addingToDashboard:!1}),Y.a.error({title:"Your dashboard app does not support adding of static charts",content:"Please use static dashboard template"}));case 12:case"end":return t.stop()}}),t)}))),icon:"plus",size:"small",loading:i,disabled:!!q.docsLink},i?"Preparing dashboard app. It may take a while. Please check console for progress...":"Add to Dashboard"),c.a.createElement(W.a,{overlay:P},c.a.createElement(H.a,{size:"small"},q&&q.title,c.a.createElement(J.a,{type:"down"}))),c.a.createElement(W.a,{overlay:w,disabled:!!q.docsLink},c.a.createElement(H.a,{size:"small"},T&&T.title,c.a.createElement(J.a,{type:"down"}))),c.a.createElement(H.a,{onClick:function(){fe("Show Query"),e.setState({showCode:"query"===r?null:"query"})},icon:"thunderbolt",size:"small",type:"query"===r?"primary":"default",disabled:!!q.docsLink},"JSON Query"),c.a.createElement(H.a,{onClick:function(){fe("Show Code"),e.setState({showCode:"code"===r?null:"code"})},icon:"code",size:"small",type:"code"===r?"primary":"default",disabled:!!q.docsLink},"Code"),c.a.createElement(H.a,{onClick:function(){fe("Show SQL"),e.setState({showCode:"sql"===r?null:"sql"})},icon:"question-circle",size:"small",type:"sql"===r?"primary":"default",disabled:!!q.docsLink},"SQL"),c.a.createElement(H.a,{onClick:function(){fe("Show Cache"),e.setState({showCode:"cache"===r?null:"cache"})},icon:"sync",size:"small",type:"cache"===r?"primary":"default",disabled:!!q.docsLink},"Cache"),c.a.createElement(H.a,{icon:"code-sandbox",size:"small",onClick:function(){return fe("Open Code Sandbox")},htmlType:"submit",disabled:!!q.docsLink},"Edit"))),M=JSON.stringify(S,null,2),L=function(){var e=Object(y.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return navigator.clipboard||$.a.error({message:"Your browser doesn't support copy to clipboard"}),e.prev=1,e.next=4,navigator.clipboard.writeText("query"===r?M:d);case 4:$.a.success({message:"Copied to clipboard"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),$.a.error({message:"Can't copy to clipboard",description:e.t0});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return C="code"===r?c.a.createElement(H.a,{icon:"copy",onClick:function(){L(),fe("Copy Code to Clipboard")},type:"primary"},"Copy Code to Clipboard"):"query"===r?c.a.createElement(H.a,{icon:"copy",onClick:function(){L(),fe("Copy Query to Clipboard")},type:"primary"},"Copy Query to Clipboard"):"sql"===r?"SQL":"Chart",g?m({resultSet:u,error:l,sandboxId:a}):c.a.createElement(D.a,{title:C,style:{minHeight:420},extra:A},q&&q.docsLink?c.a.createElement("h2",{style:{padding:24,textAlign:"center"}},"We do not support ",q.title," code generation here yet.",c.a.createElement("br",null),"Please refer to ",c.a.createElement("a",{href:q.docsLink,target:"_blank",rel:"noopener noreferrer",onClick:function(){return fe("Unsupported Framework Docs",{framework:s})}},q.title," docs")," to see on how to use it with Cube.js."):"code"===r?c.a.createElement(ae,{code:d}):"query"===r?c.a.createElement(ae,{code:M}):"sql"===r?c.a.createElement(R.QueryRenderer,{loadSql:"only",query:S,cubejsApi:v,render:function(e){var t=e.sqlQuery;return c.a.createElement(ae,{code:t&&te.a.format(t.sql())})}}):"cache"===r?c.a.createElement(oe,{query:S,cubejsApi:v}):m({resultSet:u,error:l,sandboxId:a}))}}]),t}(c.a.Component);je.defaultProps={query:{},cubejsApi:null,hideActions:null,dashboardSource:null,codeSandboxSource:null,codeExample:null,error:null,resultSet:null};var ge=Object(p.f)(je),Se=n(694),ve={line:'\n  <Chart scale={{ x: { tickCount: 8 } }} height={400} data={stackedChartData(resultSet)} forceFit>\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip crosshairs={{type : \'y\'}} />\n    <Geom type="line" position={`x*measure`} size={2} color="color" />\n  </Chart>',bar:'\n  <Chart scale={{ x: { tickCount: 8 } }} height={400} data={stackedChartData(resultSet)} forceFit>\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip />\n    <Geom type="intervalStack" position={`x*measure`} color="color" />\n  </Chart>',area:'\n  <Chart scale={{ x: { tickCount: 8 } }} height={400} data={stackedChartData(resultSet)} forceFit>\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip crosshairs={{type : \'y\'}} />\n    <Geom type="areaStack" position={`x*measure`} size={2} color="color" />\n  </Chart>',pie:"\n  <Chart height={400} data={resultSet.chartPivot()} forceFit>\n    <Coord type='theta' radius={0.75} />\n    {resultSet.seriesNames().map(s => (<Axis name={s.key} />))}\n    <Legend position='right' />\n    <Tooltip />\n    {resultSet.seriesNames().map(s => (<Geom type=\"intervalStack\" position={s.key} color=\"category\" />))}\n  </Chart>"},xe=function(e){var t=e.chartType,n=e.renderFnName;return"import { Chart, Axis, Tooltip, Geom, Coord, Legend } from 'bizcharts';\n\nconst stackedChartData = (resultSet) => {\n  const data = resultSet.pivot().map(\n    ({ xValues, yValuesArray }) =>\n      yValuesArray.map(([yValues, m]) => ({\n        x: resultSet.axisValuesString(xValues, ', '),\n        color: resultSet.axisValuesString(yValues, ', '),\n        measure: m && Number.parseFloat(m)\n      }))\n  ).reduce((a, b) => a.concat(b), []);\n\n  return data;\n}\n\nconst ".concat(n," = ({ resultSet }) => (").concat(ve[t],"\n);")},ke={bizcharts:Se},Ee=n(723),_e={line:'\n  <CartesianChart resultSet={resultSet} ChartComponent={LineChart}>\n      {resultSet.seriesNames().map((series, i) => (\n        <Line\n          key={series.key}\n          stackId="a"\n          dataKey={series.key}\n          name={series.title}\n          stroke={colors[i]}\n        />\n      ))}\n  </CartesianChart>',bar:'\n  <CartesianChart resultSet={resultSet} ChartComponent={BarChart}>\n    {resultSet.seriesNames().map((series, i) => (\n      <Bar\n        key={series.key}\n        stackId="a"\n        dataKey={series.key}\n        name={series.title}\n        fill={colors[i]}\n      />\n    ))}\n  </CartesianChart>',area:'\n  <CartesianChart resultSet={resultSet} ChartComponent={AreaChart}>\n      {resultSet.seriesNames().map((series, i) => (\n        <Area\n          key={series.key}  \n          stackId="a"\n          dataKey={series.key}\n          name={series.title}\n          stroke={colors[i]}\n          fill={colors[i]}\n        />\n      ))}\n  </CartesianChart>',pie:'\n  <ResponsiveContainer width="100%" height={350}>\n    <PieChart>\n      <Pie\n        isAnimationActive={false}\n        data={resultSet.chartPivot()}\n        nameKey="x"\n        dataKey={resultSet.seriesNames()[0].key}\n        fill="#8884d8"\n      >\n      {\n        resultSet.chartPivot().map((e, index) =>\n          <Cell key={index} fill={colors[index % colors.length]}/>\n        )\n      }\n      </Pie>\n      <Legend />\n      <Tooltip />\n    </PieChart>\n  </ResponsiveContainer>'},Ce=function(e){var t=e.chartType,n=e.renderFnName;return"import {\n  CartesianGrid,\n  PieChart,\n  Pie,\n  Cell,\n  AreaChart,\n  Area,\n  XAxis,\n  YAxis,\n  Tooltip,\n  ResponsiveContainer,\n  Legend,\n  BarChart,\n  Bar,\n  LineChart,\n  Line\n} from \"recharts\";\n\nconst CartesianChart = ({ resultSet, children, ChartComponent }) => (\n  <ResponsiveContainer width=\"100%\" height={350}>\n    <ChartComponent data={resultSet.chartPivot()}>\n      <XAxis dataKey=\"x\" />\n      <YAxis />\n      <CartesianGrid />\n      { children }\n      <Legend />\n      <Tooltip />\n    </ChartComponent>\n  </ResponsiveContainer>\n)\n\nconst colors = ['#FF6492', '#141446', '#7A77FF'];\n\nconst ".concat(n," = ({ resultSet }) => (").concat(_e[t],"\n);")},Oe={recharts:Ee},we=n(705),Pe={line:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map((s, index) => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        borderColor: COLORS_SERIES[index],\n        fill: false\n      }\n    )),\n  };\n  const options = {};\n  return <Line data={data} options={options} />;",bar:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map((s, index) => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        backgroundColor: COLORS_SERIES[index],\n        fill: false\n      }\n    )),\n  };\n  const options = {\n    scales: { xAxes: [{ stacked: true }] }\n  };\n  return <Bar data={data} options={options} />;",area:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map((s, index) => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        backgroundColor: COLORS_SERIES[index]\n      }\n    )),\n  };\n  const options = {\n    scales: { yAxes: [{ stacked: true }] }\n  };\n  return <Line data={data} options={options} />;",pie:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map(s => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        backgroundColor: COLORS_SERIES,\n        hoverBackgroundColor: COLORS_SERIES,\n      }\n    ))\n  };\n  const options = {};\n  return <Pie data={data} options={options} />;"},Te=function(e){var t=e.chartType,n=e.renderFnName;return"import { Line, Bar, Pie } from 'react-chartjs-2';\n\nconst COLORS_SERIES = ['#FF6492', '#141446', '#7A77FF'];\n\nconst ".concat(n," = ({ resultSet }) => {").concat(Pe[t],"\n};")},qe={"react-chartjs-2":we},Ae={number:'\n  <Row type="flex" justify="center" align="middle" style={{ height: \'100%\' }}>\n    <Col>\n      {resultSet\n        .seriesNames()\n        .map(s => (\n          <Statistic value={resultSet.totalRow()[s.key]} />\n        ))}\n    </Col>\n  </Row>\n  ',table:"\n  <Table \n    pagination={false}\n    columns={resultSet.tableColumns().map(c => ({ ...c, dataIndex: c.key }))} \n    dataSource={resultSet.tablePivot()} \n  />\n  "},Me=function(e){var t=e.chartType,n=e.renderFnName;return"import { Row, Col, Statistic, Table } from 'antd';\n\nconst ".concat(n," = ({ resultSet }) => (").concat(Ae[t],"\n);")},De={},Le={chartjs:{library:i,title:"Chart.js"},recharts:{library:a,title:"Recharts"},bizcharts:{library:r,title:"Bizcharts"}},Re={presets:[Q.a,K.a]},Be=function(e){var t=e.chartLibrary,n=e.query,r=e.apiUrl,a=e.cubejsToken,i=e.chartType,s="".concat(i,"Render");return"import React from 'react';\nimport cubejs from '@cubejs-client/core';\nimport { QueryRenderer } from '@cubejs-client/react';\nimport { Spin } from 'antd';\n".concat(t.sourceCodeTemplate(Object(C.a)({},e,{renderFnName:s})),'\n\nconst API_URL = "').concat(r,'"; // change to your actual endpoint\n\nconst cubejsApi = cubejs(\n  "').concat(a,'",\n  { apiUrl: API_URL + "/cubejs-api/v1" }\n);\n\nconst renderChart = (Component) => ({ resultSet, error }) => (\n  (resultSet && <Component resultSet={resultSet} />) ||\n  (error && error.toString()) || \n  (<Spin />)\n)\n\nconst ChartRenderer = () => <QueryRenderer\n  query={').concat(("object"==typeof n?JSON.stringify(n,null,2):n).split("\n").map((function(e,t){return t>0?"  ".concat(e):e})).join("\n"),"}\n  cubejsApi={cubejsApi}\n  render={renderChart(").concat(s,")}\n/>;\n\nexport default ChartRenderer;\n")},Ie=function(e){return"import ReactDOM from 'react-dom';\nimport \"antd/dist/antd.css\";\n".concat(e,'\n\nconst rootElement = document.getElementById("root");\nReactDOM.render(<ChartRenderer />, rootElement);\n')},Ne=Object.keys(Le).map((function(e){return{value:e,title:Le[e].title}})),Fe=function(e){var t=e.query,n=e.resultSet,r=e.error,a=e.sqlQuery,i=e.dashboardSource,u=e.cubejsApi,l=e.chartType,p=e.sourceCodeFn,d=Object(o.useState)("bizcharts"),m=Object(B.a)(d,2),h=m[0],y=m[1];p=p||Be;var f=function(e,t){return-1!==["table","number"].indexOf(e)?s:Le[t].library}(l,h),b=p(Object(C.a)({},e,{chartLibrary:f})),j=Object(C.a)({"@cubejs-client/core":_.a,"@cubejs-client/react":R,antd:V,react:c.a},f.imports);return c.a.createElement(N.a,{babelConfig:Re,onError:function(e){return console.log(e)},resolver:function(e){return j[e]},source:b},c.a.createElement(N.a.Consumer,null,(function(e){var s=e.element,o=e.error;return c.a.createElement(ge,{query:t,resultSet:n,error:r,sqlQuery:a,codeExample:b,codeSandboxSource:Ie(b),dependencies:j,dashboardSource:i,chartLibrary:h,setChartLibrary:y,chartLibraries:Ne,cubejsApi:u,render:function(){return o?c.a.createElement(U.a,{message:"Error occurred while compiling JS",description:c.a.createElement("pre",null,o.toString()),type:"error"}):s}})})))};Fe.defaultProps={resultSet:null,error:null,sqlQuery:null,dashboardSource:null,cubejsApi:null,chartType:null,sourceCodeFn:null};var Qe=function(e){var t=e.overlay,n=Object(O.a)(e,["overlay"]);return c.a.createElement(W.a,{overlay:t,placement:"bottomLeft",trigger:["click"]},c.a.createElement(H.a,n))},Ge=function(e,t){return c.a.createElement(z.a,null,t.length?t.map((function(t){return c.a.createElement(z.a.Item,{key:t.name,onClick:function(){return e(t)}},t.title)})):c.a.createElement(z.a.Item,{disabled:!0},"No members found"))},Ke=function(e){var t=e.onClick,n=e.availableMembers,r=Object(O.a)(e,["onClick","availableMembers"]);return c.a.createElement(Qe,Object.assign({overlay:Ge(t,n)},r))},Ve=function(e){var t=e.onRemoveClick,n=e.children,r=Object(O.a)(e,["onRemoveClick","children"]);return c.a.createElement(H.a.Group,Object.assign({style:{marginRight:8}},r),n,c.a.createElement(H.a,{type:"danger",ghost:!0,onClick:t},c.a.createElement(J.a,{type:"close"})))},Ue=function(e){var t=e.members,n=e.availableMembers,r=e.addMemberName,a=e.updateMethods;return c.a.createElement("span",null,t.map((function(e){return c.a.createElement(Ve,{key:e.index||e.name,onRemoveClick:function(){return a.remove(e)}},c.a.createElement(Ke,{availableMembers:n,onClick:function(t){return a.update(e,t)}},e.title))})),c.a.createElement(Ke,{onClick:function(e){return a.add(e)},availableMembers:n,type:"dashed",icon:"plus"},r))},ze=n(75),He=n(0),Ye=n(145),We={string:function(e){var t=e.values,n=e.onChange;return c.a.createElement(ze.a,{key:"input",style:{width:300},mode:"tags",onChange:n,value:t})},number:function(e){var t=e.values,n=e.onChange;return c.a.createElement(Ye.a,{key:"input",style:{width:300},onChange:function(e){return n([e.target.value])},value:t&&t[0]||""})}};We.string.propTypes={values:He.array,onChange:He.func.isRequired},We.string.defaultProps={values:[]},We.number.propTypes={values:He.array,onChange:He.func.isRequired},We.number.defaultProps={values:[]};var Je=function(e){var t=e.member,n=e.updateMethods,r=We[t.dimension.type]||We.string;return c.a.createElement(r,{key:"filter",values:t.values,onChange:function(e){return n.update(t,Object(C.a)({},t,{values:e}))}})},$e=function(e){var t=e.members,n=e.availableMembers,r=e.addMemberName,a=e.updateMethods;return c.a.createElement("span",null,t.map((function(e){return c.a.createElement("div",{style:{marginBottom:12},key:e.index},c.a.createElement(Ve,{onRemoveClick:function(){return a.remove(e)}},c.a.createElement(Ke,{onClick:function(t){return a.update(e,Object(C.a)({},e,{dimension:t}))},availableMembers:n,style:{width:150,textOverflow:"ellipsis",overflow:"hidden"}},e.dimension.title)),c.a.createElement(ze.a,{value:e.operator,onChange:function(t){return a.update(e,Object(C.a)({},e,{operator:t}))},style:{width:200,marginRight:8}},e.operators.map((function(e){return c.a.createElement(ze.a.Option,{key:e.name,value:e.name},e.title)}))),c.a.createElement(Je,{member:e,key:"filterInput",updateMethods:a}))})),c.a.createElement(Ke,{onClick:function(e){return a.add({dimension:e})},availableMembers:n,type:"dashed",icon:"plus"},r))},Xe=[{title:"All time",value:void 0},{value:"Today"},{value:"Yesterday"},{value:"This week"},{value:"This month"},{value:"This quarter"},{value:"This year"},{value:"Last 7 days"},{value:"Last 30 days"},{value:"Last week"},{value:"Last month"},{value:"Last quarter"},{value:"Last year"}],Ze=function(e){var t=e.members,n=e.availableMembers,r=e.addMemberName,a=e.updateMethods;return c.a.createElement("span",null,t.map((function(e){return[c.a.createElement(Ve,{onRemoveClick:function(){return a.remove(e)},key:"".concat(e.dimension.name,"-member")},c.a.createElement(Ke,{onClick:function(t){return a.update(e,Object(C.a)({},e,{dimension:t}))},availableMembers:n},e.dimension.title)),c.a.createElement("b",{key:"".concat(e.dimension.name,"-for")},"FOR"),c.a.createElement(Qe,{overlay:(i=function(t){return a.update(e,Object(C.a)({},e,{dateRange:t.value}))},c.a.createElement(z.a,null,Xe.map((function(e){return c.a.createElement(z.a.Item,{key:e.title||e.value,onClick:function(){return i(e)}},e.title||e.value)})))),style:{marginLeft:8,marginRight:8},key:"".concat(e.dimension.name,"-date-range")},e.dateRange||"All time"),c.a.createElement("b",{key:"".concat(e.dimension.name,"-by")},"BY"),c.a.createElement(Qe,{overlay:(t=e.dimension,r=function(t){return a.update(e,Object(C.a)({},e,{granularity:t.name}))},c.a.createElement(z.a,null,t.granularities.length?t.granularities.map((function(e){return c.a.createElement(z.a.Item,{key:e.title,onClick:function(){return r(e)}},e.title)})):c.a.createElement(z.a.Item,{disabled:!0},"No members found"))),style:{marginLeft:8},key:"".concat(e.dimension.name,"-granularity")},e.dimension.granularities.find((function(t){return t.name===e.granularity}))&&e.dimension.granularities.find((function(t){return t.name===e.granularity})).title)];var t,r,i})),!t.length&&c.a.createElement(Ke,{onClick:function(e){return a.add({dimension:e,granularity:"day"})},availableMembers:n,type:"dashed",icon:"plus"},r))},et=[{name:"line",title:"Line",icon:"line-chart"},{name:"area",title:"Area",icon:"area-chart"},{name:"bar",title:"Bar",icon:"bar-chart"},{name:"pie",title:"Pie",icon:"pie-chart"},{name:"table",title:"Table",icon:"table"},{name:"number",title:"Number",icon:"info-circle"}],tt=function(e){var t=e.chartType,n=e.updateChartType,r=c.a.createElement(z.a,null,et.map((function(e){return c.a.createElement(z.a.Item,{key:e.title,onClick:function(){return n(e.name)}},c.a.createElement(J.a,{type:e.icon}),e.title)}))),a=et.find((function(e){return e.name===t}));return c.a.createElement(Qe,{overlay:r,icon:a.icon},a.title)},nt=function(e,t){return Object.keys(e).map((function(n){return Object(q.a)({},n,(function(r,a){var i="".concat(n.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")," Member");a&&a.values&&(i="Update Filter Values"),a&&a.dateRange&&(i="Update Date Range"),a&&a.granularity&&(i="Update Granularity"),fe(i,{memberName:t});for(var s=arguments.length,o=new Array(s>2?s-2:0),c=2;c<s;c++)o[c-2]=arguments[c];return e[n].apply(null,[r,a].concat(o))}))})).reduce((function(e,t){return Object(C.a)({},e,t)}),{})},rt=function(e){var t=e.query,n=e.cubejsApi,r=e.apiUrl,a=e.cubejsToken,i=e.dashboardSource,s=e.setQuery;return c.a.createElement(R.QueryBuilder,{query:t,setQuery:s,cubejsApi:n,render:function(e){var t=e.resultSet,s=e.error,o=e.validatedQuery,u=e.isQueryPresent,l=e.chartType,p=e.updateChartType,d=e.measures,m=e.availableMeasures,h=e.updateMeasures,y=e.dimensions,f=e.availableDimensions,b=e.updateDimensions,j=e.segments,g=e.availableSegments,S=e.updateSegments,v=e.filters,x=e.updateFilters,k=e.timeDimensions,E=e.availableTimeDimensions,_=e.updateTimeDimensions;return[c.a.createElement(A.a,{type:"flex",justify:"space-around",align:"top",gutter:24,style:{marginBottom:12},key:"1"},c.a.createElement(M.a,{span:24},c.a.createElement(D.a,null,c.a.createElement(A.a,{type:"flex",justify:"space-around",align:"top",gutter:24,style:{marginBottom:12}},c.a.createElement(M.a,{span:24},c.a.createElement(Ue,{members:d,availableMembers:m,addMemberName:"Measure",updateMethods:nt(h,"Measure")}),c.a.createElement(L.a,{type:"vertical"}),c.a.createElement(Ue,{members:y,availableMembers:f,addMemberName:"Dimension",updateMethods:nt(b,"Dimension")}),c.a.createElement(L.a,{type:"vertical"}),c.a.createElement(Ue,{members:j,availableMembers:g,addMemberName:"Segment",updateMethods:nt(S,"Segment")}),c.a.createElement(L.a,{type:"vertical"}),c.a.createElement(Ze,{members:k,availableMembers:E,addMemberName:"Time",updateMethods:nt(_,"Time")}))),c.a.createElement(A.a,{type:"flex",justify:"space-around",align:"top",gutter:24,style:{marginBottom:12}},c.a.createElement(M.a,{span:24},c.a.createElement($e,{members:v,availableMembers:f.concat(m),addMemberName:"Filter",updateMethods:nt(x,"Filter")}))),c.a.createElement(A.a,{type:"flex",justify:"space-around",align:"top",gutter:24},c.a.createElement(M.a,{span:24},c.a.createElement(tt,{chartType:l,updateChartType:function(e){fe("Change Chart Type"),p(e)}})))))),c.a.createElement(A.a,{type:"flex",justify:"space-around",align:"top",gutter:24,key:"2"},c.a.createElement(M.a,{span:24},u?c.a.createElement(Fe,{query:o,resultSet:t,error:s,apiUrl:r,cubejsToken:a,chartType:l,cubejsApi:n,dashboardSource:i}):c.a.createElement("h2",{style:{textAlign:"center"}},"Choose a measure or dimension to get started")))]}})};rt.defaultProps={query:{},setQuery:null,cubejsApi:null,dashboardSource:null,apiUrl:"/cubejs-api/v1",cubejsToken:null};var at=rt,it=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(j.a)(this,Object(g.a)(t).call(this,e))).state={},n.dashboardSource=new T,n}var n;return Object(S.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:(n=Object(y.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)("/playground/context");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({cubejsToken:n.cubejsToken,apiUrl:n.apiUrl||window.location.href.split("#")[0].replace(/\/$/,"")});case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"cubejsApi",value:function(){var e=this.state,t=e.cubejsToken,n=e.apiUrl;return!this.cubejsApiInstance&&t&&(this.cubejsApiInstance=_()(t,{apiUrl:"".concat(n,"/cubejs-api/v1")})),this.cubejsApiInstance}},{key:"render",value:function(){var e=this.state,t=e.cubejsToken,n=e.apiUrl,r=this.props,a=r.location,i=r.history,s=new URLSearchParams(a.search),o=s.get("query")&&JSON.parse(s.get("query"))||{};return this.cubejsApi()&&c.a.createElement(at,{query:o,setQuery:function(e){return i.push("/build?query=".concat(JSON.stringify(e)))},cubejsApi:this.cubejsApi(),apiUrl:n,cubejsToken:t,dashboardSource:this.dashboardSource})||null}}]),t}(o.Component);it.defaultProps={};var st=it,ot=n(649),ct=n(682),ut=n(153),lt=ot.a.Content,pt=ot.a.Sider,dt=ct.a.TreeNode,mt=ie.a.TabPane,ht=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(j.a)(this,Object(g.a)(t).call(this,e))).state={expandedKeys:[],autoExpandParent:!0,checkedKeys:[],selectedKeys:[],activeTab:"schema",files:[]},n}var n,r,a,i;return Object(S.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:(i=Object(y.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadDBSchema();case 2:return e.next=4,this.loadFiles();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"onExpand",value:function(e){fe("Expand Tables"),this.setState({expandedKeys:e,autoExpandParent:!1})}},{key:"onCheck",value:function(e){fe("Check Tables"),this.setState({checkedKeys:e})}},{key:"onSelect",value:function(e){this.setState({selectedKeys:e})}},{key:"cubejsApi",value:function(){var e=this.state,t=e.cubejsToken,n=e.apiUrl;return!this.cubejsApiInstance&&t&&(this.cubejsApiInstance=_()(t,{apiUrl:"".concat(n,"/cubejs-api/v1")})),this.cubejsApiInstance}},{key:"loadDBSchema",value:(a=Object(y.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({schemaLoading:!0}),e.prev=1,e.next=4,w("/playground/db-schema");case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,this.setState({tablesSchema:n.tablesSchema}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.setState({schemaLoadingError:e.t0});case 14:return e.prev=14,this.setState({schemaLoading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))),function(){return a.apply(this,arguments)})},{key:"loadFiles",value:(r=Object(y.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/playground/files");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({files:n.files});case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"generateSchema",value:(n=Object(y.a)(h.a.mark((function e(){var t,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.checkedKeys,n=this.props.history,fe("Generate Schema"),e.next=5,w("/playground/generate-schema",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tables:t.filter((function(e){return 2===e.split(".").length}))})});case 5:if(200!==(r=e.sent).status){e.next=14;break}return fe("Generate Schema Success"),e.next=10,this.loadFiles();case 10:this.setState({checkedKeys:[],activeTab:"files"}),Y.a.success({title:"Schema files successfully generated!",content:"You can start building the charts",okText:"Build",cancelText:"Close",okCancel:!0,onOk:function(){n.push("/build")}}),e.next=20;break;case 14:return e.t0=fe,e.next=17,r.text();case 17:e.t1=e.sent,e.t2={error:e.t1},(0,e.t0)("Generate Schema Fail",e.t2);case 20:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"selectedFileContent",value:function(){var e=this.selectedFile();return e&&e.content}},{key:"selectedFile",value:function(){var e=this.state,t=e.files,n=e.selectedFile;return t.find((function(e){return e.fileName===n}))}},{key:"renderFilesMenu",value:function(){var e=this,t=this.state,n=t.selectedFile,r=t.files;return c.a.createElement(z.a,{mode:"inline",onClick:function(t){var n=t.key;fe("Select File"),e.setState({selectedFile:n})},selectedKeys:n?[n]:[]},r.map((function(e){return c.a.createElement(z.a.Item,{key:e.fileName},e.fileName)})))}},{key:"render",value:function(){var e=this,t=this.state,n=t.schemaLoading,r=t.schemaLoadingError,a=t.tablesSchema,i=t.selectedFile,s=t.expandedKeys,o=t.autoExpandParent,u=t.checkedKeys,l=t.selectedKeys,p=t.activeTab,d=c.a.createElement(z.a,null,c.a.createElement(z.a.Item,{onClick:function(){return e.generateSchema()}},"Generate Schema")),m=function(){return Object.keys(a||{}).length>0?c.a.createElement(ct.a,{checkable:!0,onExpand:e.onExpand.bind(e),expandedKeys:s,autoExpandParent:o,onCheck:e.onCheck.bind(e),checkedKeys:u,onSelect:e.onSelect.bind(e),selectedKeys:l},function e(t){return t.map((function(t){return t.children?c.a.createElement(dt,{title:t.title,key:t.key,dataRef:t},e(t.children)):c.a.createElement(dt,t)}))}((t=a||{},Object.keys(t).map((function(e){return{title:e,key:e,children:Object.keys(t[e]).map((function(t){return{title:t,key:"".concat(e,".").concat(t)}}))}}))))):c.a.createElement(U.a,{message:"Empty DB Schema",description:"Please check connection settings",type:"warning"});var t};return c.a.createElement(ot.a,{style:{height:"100%"}},c.a.createElement(pt,{width:300,style:{background:"#fff",borderRight:"1px solid #eee"},className:"schema-sidebar"},c.a.createElement(ie.a,{activeKey:p,onChange:function(t){return e.setState({activeTab:t})},tabBarExtraContent:c.a.createElement(W.a,{overlay:d,placement:"bottomRight",disabled:!u.length},c.a.createElement(H.a,{shape:"circle",icon:"plus",type:"primary",style:{marginRight:8}}))},c.a.createElement(mt,{tab:"Tables",key:"schema"},n?c.a.createElement(x.a,{style:{width:"100%"}}):r?c.a.createElement(U.a,{message:"Error while loading DB schema",description:r.toString(),type:"error"}):m()),c.a.createElement(mt,{tab:"Files",key:"files"},this.renderFilesMenu()))),c.a.createElement(lt,{style:{minHeight:280}},i&&c.a.createElement(U.a,{message:c.a.createElement("span",null,"This file can be edited at ",c.a.createElement("b",null,this.selectedFile().absPath)),type:"info",style:{paddingTop:10,paddingBottom:11}}),i?c.a.createElement(ae,{code:this.selectedFileContent(),style:{padding:12}}):c.a.createElement(ut.a,{style:{marginTop:50},description:"Select tables to generate Cube.js schema"})))}}]),t}(o.Component),yt=n(84),ft=function(e){var t=e.children;return c.a.createElement("div",{style:{textAlign:"center",marginTop:50}},t)},bt=function(){return c.a.createElement("p",{style:{width:450,margin:"20px auto"}},"Dashboard App is a convenient way to setup and deploy frontend app to work with Cube.js backend. You can learn more about it the ",c.a.createElement("a",{href:"https://cube.dev/docs/dashboard-app",target:"_blankl"},"Cube.js docs"),".")},jt=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(j.a)(this,Object(g.a)(t).call(this,e))).state={chartLibrary:Ne[0].value,framework:"react",templatePackageName:"react-antd-dynamic"},n}var n,r,a;return Object(S.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:(a=Object(y.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dashboardSource=new T,e.next=3,this.loadDashboard();case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"loadDashboard",value:(r=Object(y.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({appCode:null,loadError:null}),e.prev=1,e.next=4,this.dashboardSource.load();case 4:return this.setState({dashboardStarting:!1,appCode:!this.dashboardSource.loadError&&this.dashboardSource.dashboardCreated,loadError:this.dashboardSource.loadError}),e.next=7,w("/playground/dashboard-app-status");case 7:return e.next=9,e.sent.json();case 9:t=e.sent,this.setState({dashboardRunning:t.running,dashboardPort:t.dashboardPort,dashboardAppPath:t.dashboardAppPath}),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(1),this.setState({dashboardStarting:!1,loadError:c.a.createElement("pre",null,e.t0.toString())}),e.t0;case 17:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(){return r.apply(this,arguments)})},{key:"startDashboardApp",value:(n=Object(y.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({dashboardStarting:!0}),e.next=3,w("/playground/start-dashboard-app");case 3:return e.next=5,this.loadDashboard();case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.appCode,r=t.dashboardPort,a=t.loadError,i=t.dashboardRunning,s=t.dashboardStarting,o=t.dashboardAppPath;if(a&&"string"==typeof a&&-1!==a.indexOf("Dashboard app not found"))return c.a.createElement(p.a,{to:"/template-gallery"});if(a)return c.a.createElement(ft,null,c.a.createElement("h2",null,a),c.a.createElement("p",{style:{marginTop:25}},c.a.createElement(yt.a,{to:"/template-gallery"},c.a.createElement(H.a,{type:"primary"},"Create dashboard app in your project directory"))),c.a.createElement(bt,null));if(!n)return c.a.createElement(ft,null,c.a.createElement("h2",null," Creating Dashboard App"),c.a.createElement("p",null,c.a.createElement(x.a,{tip:"It may take several minutes. Please check console for progress..."})),c.a.createElement(bt,null));if(!i)return c.a.createElement(ft,null,c.a.createElement("h2",null,"Dashboard App is not running"),c.a.createElement("h3",null,"Please start dashboard app or run it manually using",c.a.createElement("code",{className:"inline-code"},"$ npm run start"),c.a.createElement("br",null),"in ",c.a.createElement("b",null,o)," directory."),c.a.createElement("p",{style:{marginTop:25}},c.a.createElement(H.a,{type:"primary",size:"large",loading:s,onClick:function(){return e.startDashboardApp(!0)}},s?"Dashboard app is starting. It may take a while. Please check console for progress...":"Start dashboard app")),c.a.createElement(bt,null));var u="http://".concat(window.location.hostname,":").concat(r);return c.a.createElement("div",{style:{height:"100%",width:"100%",padding:"15px 30px 30px 30px",background:"#fff"}},c.a.createElement(U.a,{message:c.a.createElement("span",null,"This dashboard app can be edited at ",c.a.createElement("b",null,o),". Dev server is running at ",c.a.createElement("a",{href:u,target:"_blank",rel:"noopener noreferrer"},u),". Learn more how to customize and deploy it at ",c.a.createElement("a",{href:"https://cube.dev/docs/dashboard-app"},"Cube.js docs"),". ",c.a.createElement("a",{onClick:function(){return window.location.reload()},style:{cursor:"pointer"}},"Refresh page")," if it is empty."),type:"info",closable:!0,style:{marginBottom:15}}),c.a.createElement("iframe",{src:u,style:{width:"100%",height:"100%",border:0,borderRadius:4,overflow:"hidden"},sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin",title:"Dashboard"}))}}]),t}(o.Component),gt=Object(p.f)(jt),St=(n(1935),n(1936),n(85)),vt=n(86),xt=n(446);function kt(){var e=Object(St.a)(["\n  padding: 0 27px;\n  height: 40px;\n  border-radius: 4px;\n  border: 1px solid #D0D0DA;\n  &.ant-btn-primary {\n    border: none;\n    &:hover {\n      background-color: #644AFF;\n    }\n  }\n"]);return kt=function(){return e},e}var Et=Object(vt.a)(H.a)(kt()),_t=function(e){return c.a.createElement(Et,e)};function Ct(){var e=Object(St.a)(["\n  float: right;\n  height: 32px;\n  margin: 8px ",";\n  border: 0.5px solid rgba(67, 67, 107, 0.4);\n  border-radius: 3px;\n  display: flex;\n  align-items: center;\n  color: #43436B;\n  transition: all 0.25s ease;\n  i {\n    font-size: 20px;\n    margin-right: 10px;\n    opacity: 0.3;\n  }\n  padding: 0 10px;\n  &:hover {\n    i { opacity: 0.6; }\n    border-color: rgba(67, 67, 107, 1);\n    color: #43436B;\n  }\n"]);return Ct=function(){return e},e}function Ot(){var e=Object(St.a)(["\n  font-size: 15px;\n  font-weight: 500;\n  & > a {\n    opacity: 0.6;\n  }\n  &.ant-menu-item-selected,\n  &.ant-menu-item-active {\n    a {\n      opacity: 1;\n    }\n  }\n\n  &&:not(.ant-menu-item-selected) {\n    &.ant-menu-item-active, &:hover {\n      color: #43436B;\n      border-bottom: 2px solid transparent;\n    }\n  }\n"]);return Ot=function(){return e},e}function wt(){var e=Object(St.a)(["\n  background: #EEEEF5;\n  border-bottom: 0;\n"]);return wt=function(){return e},e}var Pt=Object(vt.a)(z.a)(wt()),Tt=Object(vt.a)(z.a.Item)(Ot()),qt=vt.a.a(Ct(),(function(e){return e.noMargin?"0":"8px"})),At=function(e){var t=e.selectedKeys,n=Object(xt.useMediaQuery)({query:"(min-device-width: 992px)"}),r=Object(xt.useMediaQuery)({query:"(max-device-width: 991px)"});return c.a.createElement(ot.a.Header,{style:{padding:"0 32px"}},c.a.createElement("div",{style:{float:"left"}},c.a.createElement("img",{src:"./cubejs-playground-logo.svg",style:{display:"inline",height:28,marginRight:28},alt:""})),n&&c.a.createElement(Pt,{theme:"light",mode:"horizontal",selectedKeys:t},c.a.createElement(Tt,{key:"/build"},c.a.createElement(yt.a,{to:"/build"},"Build")),c.a.createElement(Tt,{key:"/dashboard"},c.a.createElement(yt.a,{to:"/dashboard"},"Dashboard App")),c.a.createElement(Tt,{key:"/schema"},c.a.createElement(yt.a,{to:"/schema"},"Schema")),c.a.createElement(qt,{noMargin:!0,key:"slack",href:"https://slack.cube.dev",target:"_blank"},c.a.createElement(J.a,{type:"slack"}),"Slack"),c.a.createElement(qt,{key:"docs",href:"https://cube.dev/docs",target:"_blank"},c.a.createElement(J.a,{type:"book"}),"Docs")),r&&c.a.createElement("div",{style:{float:"right"}},c.a.createElement(W.a,{overlay:c.a.createElement(z.a,null,c.a.createElement(z.a.Item,{key:"/build"},c.a.createElement(yt.a,{to:"/build"},"Build")),c.a.createElement(z.a.Item,{key:"/dashboard"},c.a.createElement(yt.a,{to:"/dashboard"},"Dashboard App")),c.a.createElement(z.a.Item,{key:"/schema"},c.a.createElement(yt.a,{to:"/schema"},"Schema")))},c.a.createElement(J.a,{type:"menu"}))))},Mt=function(e){function t(){return Object(f.a)(this,t),Object(j.a)(this,Object(g.a)(t).apply(this,arguments))}var n;return Object(S.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:(n=Object(y.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("unhandledrejection",(function(e){var t=e.reason;console.log(t);var n=(t.stack||t).toString();ye("Playground Error",{error:n}),$.a.error({message:c.a.createElement("span",null,c.a.createElement("b",null,"Error")," 😢",c.a.createElement("div",null,"Ask about it in ",c.a.createElement("a",{href:"https://slack.cube.dev",target:"_blank",rel:"noopener noreferrer"},"Slack"),". These guys know how to fix this for sure!")),description:n})})),e.next=3,Object(v.a)("/playground/context");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r=n.anonymousId,a={coreServerVersion:n.coreServerVersion,projectFingerprint:n.projectFingerprint},he(Object(C.a)({event:"identify",anonymousId:r},a));case 8:case"end":return e.stop()}var r,a}),e)}))),function(){return n.apply(this,arguments)})},{key:"componentDidCatch",value:function(e,t){ye("Playground Error",{error:(e.stack||e).toString(),info:t.toString()})}},{key:"render",value:function(){var e,t=(this.state||{}).fatalError,n=this.props,r=n.location,a=n.children;return c.a.createElement(ot.a,{style:{height:"100%"}},c.a.createElement(At,{selectedKeys:(e=r.pathname,"/template-gallery"===e?["/dashboard"]:[e])}),c.a.createElement(ot.a.Content,{style:{height:"100%"}},t?c.a.createElement(U.a,{message:"Error occured while rendering",description:t.stack,type:"error"}):a))}}],[{key:"getDerivedStateFromError",value:function(e){return{fatalError:e}}}]),t}(o.Component);Mt.defaultProps={children:[]};var Dt=Object(p.f)(Mt),Lt=n(683);function Rt(){return(Rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Bt=c.a.createElement("path",{d:"M47 92V2",stroke:"#43436B",strokeWidth:3,strokeLinecap:"round"}),It=c.a.createElement("path",{d:"M92 47L2 47",stroke:"#43436B",strokeWidth:3,strokeLinecap:"round"}),Nt=function(e){return c.a.createElement("svg",Rt({width:94,height:94,viewBox:"0 0 94 94",fill:"none"},e),Bt,It)},Ft=(n.p,n(681)),Qt=n(652);function Gt(){var e=Object(St.a)(["\n  && {\n    .ant-form-item-label {\n      line-height: 16px;\n      margin-bottom: 7px;\n      label {\n        font-weight: 500;\n        font-size: 12px;\n        line-height: 16px;\n      }\n    }\n\n    .ant-dropdown-trigger {\n      border-color: #ECECF0;\n      padding: 13px 16px;\n      line-height: 13px;\n    }\n  }\n"]);return Gt=function(){return e},e}function Kt(){var e=Object(St.a)(["\n  && {\n    .ant-modal-header {\n      border-bottom: none;\n      padding: 40px 32px 0 32px;\n\n      .ant-modal-title {\n        font-size: 20px;\n      }\n    }\n\n    .ant-modal-footer {\n      border-top: none;\n      padding: 0 32px 34px 32px;\n      text-align: left;\n    }\n  }\n"]);return Kt=function(){return e},e}var Vt=Object(vt.a)(Y.a)(Kt()),Ut=Object(vt.a)(Ft.a)(Gt()),zt=function(){return c.a.createElement(J.a,{type:"caret-down",style:{color:"#727290"}})},Ht=function(e){var t=e.visible,n=e.onOk,r=e.onCancel,a=e.onChange,i=e.chartLibraries,s=e.currentLibraryItem,o=e.frameworks,u=e.framework,l=e.frameworkItem,p=e.templatePackages,d=e.templatePackage,m=e.enableWebSocketTransport,h=c.a.createElement(z.a,{onClick:function(e){fe("Set Chart Library",{chartLibrary:e.key}),a("chartLibrary",e.key)}},i.map((function(e){return c.a.createElement(z.a.Item,{key:e.value},e.title)}))),y=c.a.createElement(z.a,{onClick:function(e){fe("Set Framework",{framework:e.key}),a("framework",e.key)}},o.map((function(e){return c.a.createElement(z.a.Item,{key:e.id},e.title)}))),f=c.a.createElement(z.a,{onClick:function(e){fe("Set Template Package",{templatePackageName:e.key}),a("templatePackageName",e.key)}},(p||[]).map((function(e){return c.a.createElement(z.a.Item,{key:e.name},e.description)})));return c.a.createElement(Vt,{title:"Create your own Dashboard App",visible:t,onOk:n,onCancel:r,footer:[c.a.createElement(_t,{key:"submit",type:"primary",onClick:n},"Ok"),c.a.createElement(_t,{key:"back",onClick:r},"Cancel")]},c.a.createElement(Ut,null,c.a.createElement(Ft.a.Item,{label:"Framework"},c.a.createElement(W.a,{overlay:y},c.a.createElement(_t,null,l&&l.title,c.a.createElement(zt,null)))),l&&l.docsLink&&c.a.createElement(U.a,{style:{marginBottom:23},type:"info",message:c.a.createElement("span",null,"We do not support ",l.title," dashboard scaffolding generation yet. Please refer to ",c.a.createElement("a",{href:l.docsLink,target:"_blank",rel:"noopener noreferrer",onClick:function(){return fe("Unsupported Dashboard Framework Docs",{framework:u})}},l.title," docs")," to see on how to use it with Cube.js.")}),c.a.createElement(Ft.a.Item,{label:"Main Template"},c.a.createElement(W.a,{overlay:f,disabled:!!l.docsLink},c.a.createElement(_t,null,d&&d.description,c.a.createElement(zt,null)))),c.a.createElement(Ft.a.Item,{label:"Charting Library"},c.a.createElement(W.a,{overlay:h,disabled:!!l.docsLink},c.a.createElement(_t,null,s&&s.title,c.a.createElement(zt,null)))),c.a.createElement(Ft.a.Item,{label:"Web Socket Transport (Real-time)"},c.a.createElement(Qt.a,{checked:m,onChange:function(e){return a("enableWebSocketTransport",e)}}))))};function Yt(){var e=Object(St.a)(["\n  display: block;\n  font-size: 16px;\n  margin-bottom: 25px;\n  margin-left: 15px;\n"]);return Yt=function(){return e},e}function Wt(){var e=Object(St.a)(["\n  border: 1px solid #ECECF0;\n\n  border-radius: 4px;\n  margin-bottom: 20px;\n  button {\n    display: none;\n    position: absolute;\n    margin-left: -64px;\n    top: 80px;\n    left: 50%;\n  }\n  padding: 16px;\n  svg path {\n    transition: stroke 0.25s ease;\n  }\n\n  && .ant-card-cover {\n    height: 168px;\n    border-radius: 4px;\n    background: ",";\n    display: flex;\n    align-items: center;\n    position: relative;\n\n    &:after {\n      content: '';\n      position: absolute;\n      width: 100%; height:100%;\n      top:0;\n      left:0;\n      background: rgba(81, 87, 125, 0.3);\n      opacity: 0;\n      transition: all 0.25s;\n    }\n\n  }\n\n  &&.ant-card-hoverable:hover {\n    box-shadow: 0px 15px 20px rgba(67, 67, 107, 0.1);\n    button { display: block; }\n    svg path {\n      stroke: #7A77FF;\n    }\n    &:hover .ant-card-cover:after {\n      opacity: ",";\n    }\n  }\n\n  && .ant-card-body {\n    min-height: 175px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  && .ant-card-meta {\n    text-align: center;\n  }\n\n  && .ant-card-meta-title {\n    white-space: unset;\n    color: #43436B;\n  }\n\n  && .ant-card-meta-description {\n    color: #A1A1B5;\n    font-size: 13px;\n  }\n"]);return Wt=function(){return e},e}function Jt(){var e=Object(St.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  max-width: 1024px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: ","\n"]);return Jt=function(){return e},e}var $t=function(e){var t=e.children;return c.a.createElement("div",{style:{marginTop:50,margin:25}},t)},Xt=vt.a.div(Jt(),(function(e){return'url("'.concat(e.src,'")')})),Zt=Object(vt.a)(D.a)(Wt(),(function(e){return e.createYourOwn?"#F8F8FB":"#EEEEF5"}),(function(e){return e.createYourOwn?"0":"1"})),en=Object(vt.a)(Lt.a.Text)(Yt()),tn=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(j.a)(this,Object(g.a)(t).call(this,e))).state={chartLibrary:Ne[0].value,framework:"react",templatePackageName:"react-antd-dynamic"},n}var n;return Object(S.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:(n=Object(y.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dashboardSource=new T,e.next=3,this.dashboardSource.load(!0);case 3:this.setState({loadError:this.dashboardSource.loadError});case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state.loadError;if(t&&-1===t.indexOf("Dashboard app not found"))return c.a.createElement(p.a,{to:"/dashboard"});var n=this.state,r=n.chartLibrary,a=n.framework,i=n.templatePackageName,s=n.createOwnModalVisible,o=n.enableWebSocketTransport,u=this.props.history,l=Ne.find((function(e){return e.value===r})),d=be.find((function(e){return e.id===a})),m=this.dashboardSource&&this.dashboardSource.templatePackages.find((function(e){return e.name===i})),f=[{name:"Dynamic Dashboard with React, AntD, and Recharts",description:"Use this template to create a dynamic dashboard application with React, AntD, and Chart.js. It comes with a dynamic query builder and Apollo GraphQL client.",coverUrl:"https://cube.dev/downloads/template-react-dashboard.png",templatePackages:["create-react-app","react-antd-dynamic","recharts-charts","antd-tables","credentials"]},{name:"Real-Time Dashboard with React, AntD, and Chart.js",description:"Use this template to create a static dashboard application with real-time WebSocket transport.",templatePackages:["create-react-app","react-antd-static","chartjs-charts","antd-tables","credentials","web-socket-transport"],coverUrl:"https://cube.dev/downloads/template-real-time-dashboard.png"},{name:"Material UI React Dashboard",coverUrl:"https://cube.dev/downloads/template-material-ui.jpg",description:"Use this template to create a Material UI–based static dashboard application and add charts to it by editing the source code or via Cube.js Playground.",templatePackages:["create-react-app","react-material-static","recharts-charts","material-tables","credentials"]}].map((function(t){var n=t.name,r=t.description,a=t.templatePackages,i=t.coverUrl;return c.a.createElement(M.a,{xs:{span:24},md:{span:12},lg:{span:8},xl:{span:6},key:n},c.a.createElement(Zt,{hoverable:!0,bordered:!1,cover:c.a.createElement(Xt,{src:i})},c.a.createElement(D.a.Meta,{title:n,description:r}),c.a.createElement(_t,{type:"primary",onClick:Object(y.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.dashboardSource.applyTemplatePackages(a);case 2:u.push("/dashboard");case 3:case"end":return t.stop()}}),t)})))},"Create App")))})).concat([c.a.createElement(M.a,{xs:{span:24},md:{span:8},lg:{span:6},key:"own"},c.a.createElement(Zt,{onClick:function(){return e.setState({createOwnModalVisible:!0})},hoverable:!0,createYourOwn:!0,bordered:!1,cover:c.a.createElement(Nt,null)},c.a.createElement(D.a.Meta,{title:"Create your Own",description:"Mix different templates together to create your own dashboard application"})),c.a.createElement(Ht,{visible:s,onOk:Object(y.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({createOwnModalVisible:!1}),n=["create-react-app",i,"".concat(r,"-charts"),"".concat(i.match(/^react-(\w+)/)[1],"-tables"),"credentials"].concat(o?["web-socket-transport"]:[]),t.next=4,e.dashboardSource.applyTemplatePackages(n);case 4:u.push("/dashboard");case 5:case"end":return t.stop()}}),t)}))),onCancel:function(){return e.setState({createOwnModalVisible:!1})},onChange:function(t,n){return e.setState(Object(q.a)({},t,n))},chartLibraries:Ne,currentLibraryItem:l,frameworks:be,framework:a,frameworkItem:d,templatePackages:this.dashboardSource&&this.dashboardSource.templatePackages,templatePackage:m,enableWebSocketTransport:o}))]);return c.a.createElement($t,null,c.a.createElement(en,null,"Build your app from one the popular templates below or ",c.a.createElement("a",{onClick:function(){return e.setState({createOwnModalVisible:!0})}},"create your own")),c.a.createElement(A.a,{type:"flex",align:"top",gutter:24},f))}}]),t}(o.Component),nn=Object(p.f)(tn),rn=Object(d.b)();rn.listen((function(e){var t;t=e,he(Object(C.a)({event:"page"},t))})),l.a.render(c.a.createElement(p.c,{history:rn},c.a.createElement(Dt,null,c.a.createElement(p.b,{key:"index",exact:!0,path:"/",component:k}),c.a.createElement(p.b,{key:"build",path:"/build",component:st}),c.a.createElement(p.b,{key:"schema",path:"/schema",component:ht}),c.a.createElement(p.b,{key:"dashboard",path:"/dashboard",component:gt}),c.a.createElement(p.b,{key:"template-gallery",path:"/template-gallery",component:nn}))),document.getElementById("root"))},210:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(752)),i=r(n(753));n(458);var s=r(n(755)),o=r(n(756)),c=r(n(757)),u=r(n(758));n(759),n(770),n(776),n(778),n(476),n(782);var l=r(n(784));n(788);var p=r(n(457));n(791),n(793),n(794),n(797);var d=r(n(798));n(800),n(802),n(804);var m=n(1938),h=r(n(480)),y=r(n(805));n(806),n(807),n(810),n(811),n(813);var f=r(n(814));n(815);var b=y.extendMoment(h),j={day:function(e){return Array.from(e.by("day")).map((function(e){return e.format("YYYY-MM-DDT00:00:00.000")}))},month:function(e){return Array.from(e.snapTo("month").by("month")).map((function(e){return e.format("YYYY-MM-01T00:00:00.000")}))},year:function(e){return Array.from(e.snapTo("year").by("year")).map((function(e){return e.format("YYYY-01-01T00:00:00.000")}))},hour:function(e){return Array.from(e.by("hour")).map((function(e){return e.format("YYYY-MM-DDTHH:00:00.000")}))},week:function(e){return Array.from(e.snapTo("isoweek").by("week")).map((function(e){return e.startOf("isoweek").format("YYYY-MM-DDT00:00:00.000")}))}},g=function(){function e(t){c(this,e),this.loadResponse=t}return u(e,[{key:"series",value:function(e){var t=this;return this.seriesNames(e).map((function(n){var r=n.title,a=n.key;return{title:r,series:t.chartPivot(e).map((function(e){var t=e.category,n=e.x;return{value:d(e,["category","x"])[a],category:t,x:n}}))}}))}},{key:"axisValues",value:function(e){var t=this.loadResponse.query;return function(n){var r=function(t){return e.filter((function(e){return"measures"!==e})).map((function(e){return null!=n[e]?n[e]:null})).concat(t?[t]:[])};return e.find((function(e){return"measures"===e}))&&(t.measures||[]).length?t.measures.map(r):[r()]}}},{key:"axisValuesString",value:function(e,t){return e.map((function(e){return null==e?"∅":""===e?"[Empty string]":e})).join(t||", ")}},{key:"normalizePivotConfig",value:function(e){var t=this.loadResponse.query,n=(t.timeDimensions||[]).filter((function(e){return!!e.granularity}));(e=e||(n.length?{x:n.map((function(e){return e.dimension})),y:t.dimensions||[]}:{x:t.dimensions||[],y:[]})).x=e.x||[],e.y=e.y||[];var r=e.x.concat(e.y),a=n.map((function(e){return e.dimension})).concat(t.dimensions);return e.x=e.x.concat(a.filter((function(e){return-1===r.indexOf(e)}))),e.x.concat(e.y).find((function(e){return"measures"===e}))||(e.y=e.y.concat(["measures"])),(t.measures||[]).length||(e.x=e.x.filter((function(e){return"measures"!==e})),e.y=e.y.filter((function(e){return"measures"!==e}))),null==e.fillMissingDates&&(e.fillMissingDates=!0),e}},{key:"timeSeries",value:function(e){if(!e.granularity)return null;var t=e.dateRange;if(!t){var n=m.pipe(m.map((function(t){return t[e.dimension]&&b(t[e.dimension])})),m.filter((function(e){return!!e})))(this.loadResponse.data);t=n.length&&[m.reduce(m.minBy((function(e){return e.toDate()})),n[0],n),m.reduce(m.maxBy((function(e){return e.toDate()})),n[0],n)]||null}if(!t)return null;var r=b(t[0]).format("YYYY-MM-DD 00:00:00"),a=b(t[1]).format("YYYY-MM-DD 23:59:59"),i=b.range(r,a);if(!j[e.granularity])throw new Error("Unsupported time granularity: ".concat(e.granularity));return j[e.granularity](i)}},{key:"pivot",value:function(t){var n=this;t=this.normalizePivotConfig(t);var r=m.groupBy((function(e){var t=e.xValues;return n.axisValuesString(t)})),a=function(e,t,n){return e[t]};if(t.fillMissingDates&&1===t.x.length&&m.equals(t.x,(this.loadResponse.query.timeDimensions||[]).filter((function(e){return!!e.granularity})).map((function(e){return e.dimension})))){var i=this.timeSeries(this.loadResponse.query.timeDimensions[0]);i&&(r=function(e){var t=m.groupBy((function(e){var t=e.xValues;return b(t[0]).format(b.HTML5_FMT.DATETIME_LOCAL_MS)}),e);return i.map((function(e){return p({},e,t[e]||[{xValues:[e],row:{}}])})).reduce((function(e,t){return Object.assign(e,t)}),{})},a=function(e,t,n){return e[t]||0})}var s=m.pipe(m.map((function(e){return n.axisValues(t.x)(e).map((function(t){return{xValues:t,row:e}}))})),m.unnest,r,m.toPairs)(this.loadResponse.data),o=m.pipe(m.map((function(e){var r=l(e,2),a=(r[0],r[1]);return m.unnest(a.filter((function(e){var t=e.row;return Object.keys(t).length>0})).map((function(e){var r=e.row;return n.axisValues(t.y)(r)})))})),m.unnest,m.uniq)(s);return s.map((function(r){var i=l(r,2),s=(i[0],i[1]),c=s[0].xValues,u=m.pipe(m.map((function(e){var r=e.row;return n.axisValues(t.y)(r).map((function(e){return{yValues:e,row:r}}))})),m.unnest,m.groupBy((function(e){var t=e.yValues;return n.axisValuesString(t)})))(s);return{xValues:c,yValuesArray:m.unnest(o.map((function(r){var i=t.x.find((function(e){return"measures"===e}))?e.measureFromAxis(c):e.measureFromAxis(r);return(u[n.axisValuesString(r)]||[{row:{}}]).map((function(e){var t=e.row;return[r,a(t,i,c)]}))})))}}))}},{key:"pivotedRows",value:function(e){return this.chartPivot(e)}},{key:"chartPivot",value:function(e){var t=this;return this.pivot(e).map((function(e){var n=e.xValues,r=e.yValuesArray;return a({category:t.axisValuesString(n,", "),x:t.axisValuesString(n,", ")},r.map((function(e){var n=l(e,2),r=n[0],a=n[1];return p({},t.axisValuesString(r,", "),a&&Number.parseFloat(a))})).reduce((function(e,t){return Object.assign(e,t)}),{}))}))}},{key:"tablePivot",value:function(e){var t=this.normalizePivotConfig(e),n=function(e,t){return function(n,r){return p({},"measures"===n?e[r]:n,"measures"===n?t:e[r])}};return this.pivot(t).map((function(e){var r=e.xValues;return e.yValuesArray.map((function(e){var a=l(e,2),i=a[0],s=a[1];return t.x.map(n(r,s)).concat(t.y.map(n(i,s))).reduce((function(e,t){return Object.assign(e,t)}),{})})).reduce((function(e,t){return Object.assign(e,t)}),{})}))}},{key:"tableColumns",value:function(e){var t=this,n=this.normalizePivotConfig(e),r=function(e){return"measures"===e?(t.query().measures||[]).map((function(e){return{key:e,title:t.loadResponse.annotation.measures[e].title}})):[{key:e,title:(t.loadResponse.annotation.dimensions[e]||t.loadResponse.annotation.timeDimensions[e]).title}]};return n.x.map(r).concat(n.y.map(r)).reduce((function(e,t){return e.concat(t)}))}},{key:"totalRow",value:function(){return this.chartPivot()[0]}},{key:"categories",value:function(e){return this.chartPivot(e)}},{key:"seriesNames",value:function(t){var n=this;return t=this.normalizePivotConfig(t),m.pipe(m.map(this.axisValues(t.y)),m.unnest,m.uniq)(this.loadResponse.data).map((function(r){return{title:n.axisValuesString(t.y.find((function(e){return"measures"===e}))?m.dropLast(1,r).concat(n.loadResponse.annotation.measures[e.measureFromAxis(r)].title):r,", "),key:n.axisValuesString(r)}}))}},{key:"query",value:function(){return this.loadResponse.query}},{key:"rawData",value:function(){return this.loadResponse.data}}],[{key:"measureFromAxis",value:function(e){return e[e.length-1]}}]),e}(),S=function(){function e(t){c(this,e),this.sqlQuery=t}return u(e,[{key:"rawQuery",value:function(){return this.sqlQuery.sql}},{key:"sql",value:function(){return this.rawQuery().sql[0]}}]),e}(),v=function(e){return m.fromPairs(e.map((function(e){return[e.name,e]})))},x={string:[{name:"contains",title:"contains"},{name:"notContains",title:"does not contain"},{name:"equals",title:"equals"},{name:"notEquals",title:"does not equal"},{name:"set",title:"is set"},{name:"notSet",title:"is not set"}],number:[{name:"equals",title:"equals"},{name:"notEquals",title:"does not equal"},{name:"set",title:"is set"},{name:"notSet",title:"is not set"},{name:"gt",title:">"},{name:"gte",title:">="},{name:"lt",title:"<"},{name:"lte",title:"<="}]},k=function(){function e(t){c(this,e),this.meta=t;var n=this.meta.cubes;this.cubes=n,this.cubesMap=m.fromPairs(n.map((function(e){return[e.name,{measures:v(e.measures),dimensions:v(e.dimensions),segments:v(e.segments)}]})))}return u(e,[{key:"membersForQuery",value:function(e,t){return m.unnest(this.cubes.map((function(e){return e[t]})))}},{key:"resolveMember",value:function(e,t){var n=this,r=e.split("."),a=l(r,1)[0];if(!this.cubesMap[a])return{title:e,error:"Cube not found ".concat(a," for path '").concat(e,"'")};var i=(Array.isArray(t)?t:[t]).map((function(t){return n.cubesMap[a][t]&&n.cubesMap[a][t][e]})).find((function(e){return e}));return i||{title:e,error:"Path not found '".concat(e,"'")}}},{key:"defaultTimeDimensionNameFor",value:function(e){var t=this,n=e.split("."),r=l(n,1)[0];return this.cubesMap[r]?Object.keys(this.cubesMap[r].dimensions||{}).find((function(e){return"time"===t.cubesMap[r].dimensions[e].type})):null}},{key:"filterOperatorsForMember",value:function(e,t){var n=this.resolveMember(e,t);return x[n.type]||x.string}}]),e}(),E=function(){function e(t){c(this,e),this.progressResponse=t}return u(e,[{key:"stage",value:function(){return this.progressResponse.stage}},{key:"timeElapsed",value:function(){return this.progressResponse.timeElapsed}}]),e}(),_=function(){function e(t){var n=t.authorization,r=t.apiUrl,a=t.headers,i=void 0===a?{}:a;c(this,e),this.authorization=n,this.apiUrl=r,this.headers=i}return u(e,[{key:"request",value:function(e,t){var n,r=this,c=new URLSearchParams(t&&Object.keys(t).map((function(e){return p({},e,"object"===o(t[e])?JSON.stringify(t[e]):t[e])})).reduce((function(e,t){return a({},e,t)}),{}));return{subscribe:(n=s(i.mark((function t(n){var a,s=this;return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f("".concat(r.apiUrl,"/").concat(e).concat(c.toString().length?"?".concat(c):""),{headers:Object.assign({Authorization:r.authorization,"Content-Type":"application/json"},r.headers)});case 2:return a=t.sent,t.abrupt("return",n(a,(function(){return s.subscribe(n)})));case 4:case"end":return t.stop()}}),t,this)}))),function(e){return n.apply(this,arguments)})}}}]),e}(),C="https://statsbot.co/cubejs-api/v1",O=0,w=function(){function e(t,n){c(this,e),"object"===o(t)&&(n=t,t=void 0),n=n||{},this.apiToken=t,this.apiUrl=n.apiUrl||C,this.headers=n.headers||{},this.transport=n.transport||new _({authorization:"function"==typeof t?void 0:t,apiUrl:this.apiUrl,headers:this.headers}),this.pollInterval=n.pollInterval||5}var t;return u(e,[{key:"request",value:function(e,t){return this.transport.request(e,t)}},{key:"loadMethod",value:function(e,t,n,r){var a=this,o=++O;"function"!=typeof n||r||(r=n,n=void 0);var c=(n=n||{}).mutexKey||"default";n.mutexObj&&(n.mutexObj[c]=o);var u,l=this.updateTransportAuthorization().then((function(){return e()})),p=!1,d=function(){var e=s(i.mark((function e(){var t;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:if(t=e.sent,!n.mutexObj||n.mutexObj[c]===o){e.next=9;break}if(p=!0,!t.unsubscribe){e.next=8;break}return e.next=8,t.unsubscribe();case 8:throw"Mutex has been changed";case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=s(i.mark((function e(o,c){var u,m,h,y,f,b;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:return u=e.sent,m=function(){var e=s(i.mark((function e(){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.subscribe||p){e.next=8;break}if(!u.unsubscribe){e.next=5;break}return e.abrupt("return",c());case 5:return e.next=7,new Promise((function(e){return setTimeout((function(){return e()}),1e3*a.pollInterval)}));case 7:return e.abrupt("return",c());case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=s(i.mark((function e(t){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=5;break}if(!t){e.next=4;break}return e.next=4,new Promise((function(e){return setTimeout((function(){return e()}),1e3*a.pollInterval)}));case 4:return e.abrupt("return",c());case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.next=7,a.updateTransportAuthorization();case 7:if(502!==o.status){e.next=11;break}return e.next=10,d();case 10:return e.abrupt("return",h(!0));case 11:return e.next=13,o.json();case 13:if("Continue wait"!==(y=e.sent).error){e.next=19;break}return e.next=17,d();case 17:return n.progressCallback&&n.progressCallback(new E(y)),e.abrupt("return",h());case 19:if(200===o.status){e.next=32;break}return e.next=22,d();case 22:if(n.subscribe||!u.unsubscribe){e.next=25;break}return e.next=25,u.unsubscribe();case 25:if(f=new Error(y.error),!r){e.next=30;break}r(f),e.next=31;break;case 30:throw f;case 31:return e.abrupt("return",m());case 32:return e.next=34,d();case 34:if(n.subscribe||!u.unsubscribe){e.next=37;break}return e.next=37,u.unsubscribe();case 37:if(b=t(y),!r){e.next=42;break}r(null,b),e.next=43;break;case 42:return e.abrupt("return",b);case 43:return e.abrupt("return",m());case 44:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),h=l.then((function(e){return function(e){return new Promise((function(t,n){e.then((function(e){return t(e)}),(function(e){return"Mutex has been changed"!==e&&n(e)}))}))}(e.subscribe(m))}));return r?{unsubscribe:(u=s(i.mark((function e(){var t;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l;case 2:if(t=e.sent,p=!0,!t.unsubscribe){e.next=6;break}return e.abrupt("return",t.unsubscribe());case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})}:h}},{key:"updateTransportAuthorization",value:(t=s(i.mark((function e(){var t;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this.apiToken){e.next=5;break}return e.next=3,this.apiToken();case 3:t=e.sent,this.transport.authorization!==t&&(this.transport.authorization=t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"load",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("load",{query:e})}),(function(e){return new g(e)}),t,n)}},{key:"sql",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("sql",{query:e})}),(function(e){return new S(e)}),t,n)}},{key:"meta",value:function(e,t){var n=this;return this.loadMethod((function(){return n.request("meta")}),(function(e){return new k(e)}),e,t)}},{key:"subscribe",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("subscribe",{query:e})}),(function(e){return new g(e)}),a({},t,{subscribe:!0}),n)}}]),e}();t.default=function(e,t){return new w(e,t)},t.HttpTransport=_},730:function(e,t,n){e.exports=n(1939)}});